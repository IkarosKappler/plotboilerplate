(()=>{"use strict";var t={432:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BezierPath=void 0;var s=i(710),r=i(281),n=i(919),o=i(909),a=function(){function t(t){this.className="BezierPath",this.START_POINT=0,this.START_CONTROL_POINT=1,this.END_CONTROL_POINT=2,this.END_POINT=3,this.uid=n.UIDGenerator.next(),t||(t=[]),this.totalArcLength=0,this.adjustCircular=!1,this.bezierCurves=[]}return t.prototype.addCurve=function(t){if(null==t||void 0===t)throw"Cannot add null curve to bézier path.";this.bezierCurves.push(t),this.bezierCurves.length>1?(t.startPoint=this.bezierCurves[this.bezierCurves.length-2].endPoint,this.adjustSuccessorControlPoint(this.bezierCurves.length-2,!0,!0)):this.totalArcLength+=t.getLength()},t.prototype.locateCurveByStartPoint=function(t){for(var e=0;e<this.bezierCurves.length;e++)if(this.bezierCurves[e].startPoint.equals(t))return e;return-1},t.prototype.locateCurveByEndPoint=function(t){for(var e=0;e<this.bezierCurves.length;e++)if(this.bezierCurves[e].endPoint.equals(t))return e;return-1},t.prototype.locateCurveByStartControlPoint=function(t){for(var e=0;e<this.bezierCurves.length;e++)if(this.bezierCurves[e].startControlPoint.equals(t))return e;return-1},t.prototype.locateCurveByEndControlPoint=function(t){for(var e=0;e<this.bezierCurves.length;e++)if(this.bezierCurves[e].endControlPoint.equals(t))return e;return-1},t.prototype.getLength=function(){return this.totalArcLength},t.prototype.updateArcLengths=function(){this.totalArcLength=0;for(var t=0;t<this.bezierCurves.length;t++)this.bezierCurves[t].updateArcLengths(),this.totalArcLength+=this.bezierCurves[t].getLength()},t.prototype.getCurveCount=function(){return this.bezierCurves.length},t.prototype.getCurveAt=function(t){return this.bezierCurves[t]},t.prototype.translate=function(t){for(var e=0;e<this.bezierCurves.length;e++)(i=this.bezierCurves[e]).getStartPoint().add(t),i.getStartControlPoint().add(t),i.getEndControlPoint().add(t);var i;return(i=this.bezierCurves[this.bezierCurves.length-1]).getEndPoint().add(t),this.updateArcLengths(),this},t.prototype.scale=function(t,e){for(var i=0;i<this.bezierCurves.length;i++){var s=this.bezierCurves[i];s.getStartPoint().scale(e,t),s.getStartControlPoint().scale(e,t),s.getEndControlPoint().scale(e,t)}return this.bezierCurves.length>0&&!this.adjustCircular&&this.bezierCurves[this.bezierCurves.length-1].getEndPoint().scale(e,t),this.updateArcLengths(),this},t.prototype.rotate=function(t,e){for(var i=0;i<this.bezierCurves.length;i++){var s=this.bezierCurves[i];s.getStartPoint().rotate(t,e),s.getStartControlPoint().rotate(t,e),s.getEndControlPoint().rotate(t,e)}this.bezierCurves.length>0&&!this.adjustCircular&&this.bezierCurves[this.bezierCurves.length-1].getEndPoint().rotate(t,e)},t.prototype.getClosestT=function(t){for(var e=-1,i=0,s=0,r=0,n=0,o=0,a=0;a<this.bezierCurves.length;a++)r=this.bezierCurves[a].getClosestT(t),s=this.bezierCurves[a].getPointAt(r).distance(t),(-1==e||s<i)&&(e=a,i=s,n=o+r*this.bezierCurves[a].getLength()),o+=this.bezierCurves[a].getLength();return Math.max(0,Math.min(1,n/this.totalArcLength))},t.prototype.getPoint=function(t){if(t<0||t>this.totalArcLength)return console.log("[BezierPath.getPoint(u)] u is out of bounds: "+t+"."),null;for(var e=0,i=0;e<this.bezierCurves.length&&i+this.bezierCurves[e].getLength()<t;)i+=this.bezierCurves[e].getLength(),e++;if(e>=this.bezierCurves.length)return this.bezierCurves[this.bezierCurves.length-1].getEndPoint().clone();var s=t-i;return this.bezierCurves[e].getPoint(s)},t.prototype.getPointAt=function(t){return this.getPoint(t*this.totalArcLength)},t.prototype.getTangentAt=function(t){return this.getTangent(t*this.totalArcLength)},t.prototype.getTangent=function(t){if(t<0||t>this.totalArcLength)return console.warn("[BezierPath.getTangent(u)] u is out of bounds: "+t+"."),null;for(var e=0,i=0;e<this.bezierCurves.length&&i+this.bezierCurves[e].getLength()<t;)i+=this.bezierCurves[e].getLength(),e++;var s=t-i;return this.bezierCurves[e].getTangent(s)},t.prototype.getPerpendicularAt=function(t){return this.getPerpendicular(t*this.totalArcLength)},t.prototype.getPerpendicular=function(e){if(e<0||e>this.totalArcLength)return console.log("[BezierPath.getPerpendicular(u)] u is out of bounds: "+e+"."),null;var i=t._locateUIndex(this,e),s=this.bezierCurves[i.i],r=e-i.uPart;return s.getPerpendicular(r)},t._locateUIndex=function(t,e){for(var i=0,s=0,r=0;i<t.bezierCurves.length&&s+t.bezierCurves[i].getLength()<e;)s+=t.bezierCurves[i].getLength(),i+1<t.bezierCurves.length&&(r+=t.bezierCurves[i].getLength()),i++;return{i,uPart:s,uBefore:r}},t.prototype.getSubPathAt=function(e,i){e=Math.max(0,e),i=Math.min(1,i);var s=e*this.totalArcLength,r=i*this.totalArcLength,n=t._locateUIndex(this,s),o=t._locateUIndex(this,r),a=(s-n.uBefore)/this.bezierCurves[n.i].getLength();if(n.i==o.i){var h=(r-o.uBefore)/this.bezierCurves[o.i].getLength(),l=this.bezierCurves[n.i].getSubCurveAt(a,h);return t.fromArray([l])}var c=[];if(n.i>o.i){l=this.bezierCurves[n.i].getSubCurveAt(a,0),c.push(l);for(var u=n.i-1;u>o.i;u--)c.push(this.bezierCurves[u].clone().reverse());h=(r-o.uBefore)/this.bezierCurves[o.i].getLength(),c.push(this.bezierCurves[o.i].getSubCurveAt(1,h))}else{for(l=this.bezierCurves[n.i].getSubCurveAt(a,1),c.push(l),u=n.i+1;u<o.i&&u<this.bezierCurves.length;u++)c.push(this.bezierCurves[u].clone());h=(r-o.uBefore)/this.bezierCurves[o.i].getLength(),c.push(this.bezierCurves[o.i].getSubCurveAt(0,h))}return t.fromArray(c)},t.prototype.moveCurvePoint=function(t,e,i){this.getCurveAt(t).moveCurvePoint(e,i,!0,!0),e==this.START_POINT&&(t>0||this.adjustCircular)?this.getCurveAt(t-1<0?this.bezierCurves.length+(t-1):t-1).moveCurvePoint(this.END_CONTROL_POINT,i,!0,!1):e==this.END_POINT&&(t+1<this.bezierCurves.length||this.adjustCircular)?this.getCurveAt((t+1)%this.bezierCurves.length).moveCurvePoint(this.START_CONTROL_POINT,i,!0,!1):e==this.START_CONTROL_POINT&&t>0?this.adjustPredecessorControlPoint(t,!0,!1):e==this.END_CONTROL_POINT&&t+1<this.getCurveCount()&&this.adjustSuccessorControlPoint(t,!0,!1),this.updateArcLengths()},t.prototype.adjustPredecessorControlPoint=function(e,i,s){if(this.adjustCircular||!(e<=0)){var r=this.getCurveAt(e),n=this.getCurveAt(e-1<0?this.getCurveCount()+(e-1):e-1);t.adjustNeighbourControlPoint(r,n,r.getStartPoint(),r.getStartControlPoint(),n.getEndPoint(),n.getEndControlPoint(),i,s)}},t.prototype.adjustSuccessorControlPoint=function(e,i,s){if(this.adjustCircular||!(e+1>this.getCurveCount())){var r=this.getCurveAt(e),n=this.getCurveAt((e+1)%this.getCurveCount());t.adjustNeighbourControlPoint(r,n,r.getEndPoint(),r.getEndControlPoint(),n.getStartPoint(),n.getStartControlPoint(),i,s)}},t.adjustNeighbourControlPoint=function(t,e,i,s,r,n,a,h){var l=new o.Vertex(s.x-i.x,s.y-i.y),c=new o.Vertex(n.x-r.x,n.y-r.y),u=Math.sqrt(Math.pow(l.x,2)+Math.pow(l.y,2)),d=Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y,2));u<=.1||(a?n.set(r.x-l.x*(d/u),r.y-l.y*(d/u)):n.set(r.x-l.x,r.y-l.y),e.updateArcLengths())},t.prototype.getBounds=function(){for(var t,e=new o.Vertex(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),i=new o.Vertex(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),r=0;r<this.bezierCurves.length;r++)t=this.bezierCurves[r].getBounds(),e.x=Math.min(e.x,t.min.x),e.y=Math.min(e.y,t.min.y),i.x=Math.max(i.x,t.max.x),i.y=Math.max(i.y,t.max.y);return new s.Bounds(e,i)},t.prototype.clone=function(){for(var e=new t(null),i=0;i<this.bezierCurves.length;i++)e.bezierCurves.push(this.bezierCurves[i].clone()),i>0&&(e.bezierCurves[i-1].endPoint=e.bezierCurves[i].startPoint);return e.updateArcLengths(),e.adjustCircular=this.adjustCircular,e},t.prototype.equals=function(t){if(!t)return!1;if(!t.bezierCurves)return!1;if(void 0===t.bezierCurves.length)return!1;if(t.bezierCurves.length!=this.bezierCurves.length)return!1;for(var e=0;e<this.bezierCurves.length;e++)if(!this.bezierCurves[e].equals(t.bezierCurves[e]))return!1;return!0},t.prototype.toSVGString=function(t){t=t||{};var e=[];e.push("<path"),t.className&&e.push(' class="'+t.className+'"'),e.push(' d="');for(var i=0;i<this.bezierCurves.length;i++)i>0&&e.push(" "),e.push(this.bezierCurves[i].toSVGPathData());return e.push('" />'),e.join("")},t.prototype.toJSON=function(t){var e=[];e.push("[");for(var i=0;i<this.bezierCurves.length;i++)i>0&&e.push(","),t?e.push("\n\t"):e.push(" "),e.push(this.bezierCurves[i].toJSON(t));return 0!=this.bezierCurves.length&&e.push(" "),e.push("]"),e.join("")},t.fromJSON=function(e){var i=JSON.parse(e);return t.fromArray(i)},t.fromArray=function(e){if(!Array.isArray(e))throw"[BezierPath.fromArray] Passed object must be an array.";var i=e;if(i.length<1)throw"[BezierPath.fromArray] Passed array must contain at least one bezier curve (has "+i.length+").";for(var s=new t(null),n=null,o=0;o<i.length;o++){var a=null;if(r.CubicBezierCurve.isInstance(i[o]))a=i[o].clone();else if(0 in i[o]&&1 in i[o]&&2 in i[o]&&3 in i[o]){if(!(i[o][0]&&i[o][1]&&i[o][2]&&i[o][3]))throw"Cannot convert path data to BezierPath instance. At least one element is undefined (index="+o+"): "+i[o];a=r.CubicBezierCurve.fromArray(i[o])}else a=r.CubicBezierCurve.fromObject(i[o]);n&&(a.startPoint=n.endPoint),s.bezierCurves.push(a),n=a}return s.updateArcLengths(),s},t.prototype.toReducedListRepresentation=function(t){void 0===t&&(t=1);var e=[];e.push("[");for(var i=0;i<this.bezierCurves.length;i++){var s=this.bezierCurves[i];e.push(s.getStartPoint().x.toFixed(t)),e.push(","),e.push(s.getStartPoint().y.toFixed(t)),e.push(","),e.push(s.getStartControlPoint().x.toFixed(t)),e.push(","),e.push(s.getStartControlPoint().y.toFixed(t)),e.push(","),e.push(s.getEndControlPoint().x.toFixed(t)),e.push(","),e.push(s.getEndControlPoint().y.toFixed(t)),e.push(",")}return 0!=this.bezierCurves.length&&(s=this.bezierCurves[this.bezierCurves.length-1],e.push(s.getEndPoint().x.toFixed(t)),e.push(","),e.push(s.getEndPoint().y.toFixed(t))),e.push("]"),e.join("")},t.fromReducedListRepresentation=function(e){var i=JSON.parse(e);if(!i.length)throw console.log("Cannot parse bezier path from non-array object nor from empty point list."),"Cannot parse bezier path from non-array object nor from empty point list.";if(i.length<8)throw console.log("Cannot build bezier path. The passed array must contain at least 8 elements (numbers)."),"Cannot build bezier path. The passed array must contain at least 8 elements (numbers).";var s=new t(null),n=null,a=null,h=null,l=null,c=0;do{0==c&&(n=new o.Vertex(i[c],i[c+1])),a=new o.Vertex(i[c+2],i[c+3]),h=new o.Vertex(i[c+4],i[c+5]),l=new o.Vertex(i[c+6],i[c+7]);var u=new r.CubicBezierCurve(n,l,a,h);s.bezierCurves.push(u),n=l,c+=6}while(c+2<i.length);return s.updateArcLengths(),s},t.START_POINT=0,t.START_CONTROL_POINT=1,t.END_CONTROL_POINT=2,t.END_POINT=3,t}();e.BezierPath=a},710:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bounds=void 0;var s=i(909),r=function(){function t(t,e){this.min=t,this.max=e,this.width=e.x-t.x,this.height=e.y-t.y}return t.computeFromVertices=function(e){if(0==e.length)return new t(new s.Vertex(0,0),new s.Vertex(0,0));var i,r=e[0].x,n=e[0].x,o=e[0].y,a=e[0].y;for(var h in e)i=e[h],r=Math.min(r,i.x),n=Math.max(n,i.x),o=Math.min(o,i.y),a=Math.max(a,i.y);return new t(new s.Vertex(r,o),new s.Vertex(n,a))},t}();e.Bounds=r},991:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var s=i(198),r=i(919),n=i(609),o=i(909),a=function(){function t(t,e){this.className="Circle",this.uid=r.UIDGenerator.next(),this.center=t,this.radius=e}return t.prototype.containsCircle=function(t){return this.center.distance(t.center)+t.radius<this.radius},t.prototype.lineDistance=function(t){return t.getClosestPoint(this.center).distance(this.center)-this.radius},t.prototype.vertAt=function(e){return t.circleUtils.vertAt(e,this.radius).add(this.center)},t.prototype.tangentAt=function(e){var i=t.circleUtils.vertAt(e,this.radius);return new n.Vector(i,new o.Vertex(0,0)).add(this.center).perp()},t.prototype.circleIntersection=function(t){if(this.center.distance(t.center)>this.radius+t.radius)return null;if(this.center.distance(t.center)<Math.abs(this.radius-t.radius))return null;var e=this.center,i=t.center,r=e.distance(i),n=(this.radius*this.radius-t.radius*t.radius+r*r)/(2*r),a=Math.sqrt(this.radius*this.radius-n*n),h=i.clone().scale(n/r,e),l=h.x+a*(i.y-e.y)/r,c=h.y-a*(i.x-e.x)/r,u=h.x-a*(i.y-e.y)/r,d=h.y+a*(i.x-e.x)/r;return new s.Line(new o.Vertex(l,c),new o.Vertex(u,d))},t.prototype.toSVGString=function(t){t=t||{};var e=[];return e.push("<circle"),t.className&&e.push(' class="'+t.className+'"'),e.push(' cx="'+this.center.x+'"'),e.push(' cy="'+this.center.y+'"'),e.push(' r="'+this.radius+'"'),e.push(" />"),e.join("")},t.circleUtils={vertAt:function(t,e){return new o.Vertex(Math.cos(t)*e,Math.sin(t)*e)}},t}();e.Circle=a},210:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CircleSector=void 0;var s=i(919),r=function(){function t(t,e,i){this.className="CircleSector",this.uid=s.UIDGenerator.next(),this.circle=t,this.startAngle=e,this.endAngle=i}return t.prototype.toSVGString=function(e){e=e||{};var i=[];i.push("<path "),e.className&&i.push(' class="'+e.className+'"');var s=t.circleSectorUtils.describeSVGArc(this.circle.center.x,this.circle.center.y,this.circle.radius,this.startAngle,this.endAngle);return i.push(' d="'+s.join(" ")+'" />'),i.join("")},t.circleSectorUtils={polarToCartesian:function(t,e,i,s){return{x:t+i*Math.cos(s),y:e+i*Math.sin(s)}},describeSVGArc:function(e,i,s,r,n,o){void 0===o&&(o={moveToStart:!0});var a=t.circleSectorUtils.polarToCartesian(e,i,s,n),h=t.circleSectorUtils.polarToCartesian(e,i,s,r);if(2*Math.PI-Math.abs(r-n)<.001){var l=t.circleSectorUtils.describeSVGArc(e,i,s,r,r+(n-r)/2,o),c=(l[l.length-2],l[l.length-1],t.circleSectorUtils.describeSVGArc(e,i,s,r+(n-r)/2,n,o));return l.concat(c)}var u=n-r<=Math.PI?0:1,d=[];return o.moveToStart&&d.push("M",h.x,h.y),d.push("A",s,s,0,u,1,a.x,a.y),d}},t}();e.CircleSector=r},281:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CubicBezierCurve=void 0;var s=i(710),r=i(919),n=i(909),o=i(609),a=function(){function t(e,i,s,n){this.START_POINT=t.START_POINT,this.START_CONTROL_POINT=t.START_CONTROL_POINT,this.END_CONTROL_POINT=t.END_CONTROL_POINT,this.END_POINT=t.END_POINT,this.uid=r.UIDGenerator.next(),this.startPoint=e,this.startControlPoint=s,this.endPoint=i,this.endControlPoint=n,this.curveIntervals=30,this.segmentCache=[],this.segmentLengths=[],this.arcLength=null,this.updateArcLengths()}return t.prototype.moveCurvePoint=function(t,e,i,s){t==this.START_POINT?(this.getStartPoint().add(e),i&&this.getStartControlPoint().add(e)):t==this.START_CONTROL_POINT?this.getStartControlPoint().add(e):t==this.END_CONTROL_POINT?this.getEndControlPoint().add(e):t==this.END_POINT?(this.getEndPoint().add(e),i&&this.getEndControlPoint().add(e)):console.log("[CubicBezierCurve.moveCurvePoint] pointID '"+t+"' invalid."),s&&this.updateArcLengths()},t.prototype.translate=function(t){return this.startPoint.add(t),this.startControlPoint.add(t),this.endControlPoint.add(t),this.endPoint.add(t),this},t.prototype.reverse=function(){var t=this.startPoint;return this.startPoint=this.endPoint,this.endPoint=t,t=this.startControlPoint,this.startControlPoint=this.endControlPoint,this.endControlPoint=t,this},t.prototype.getLength=function(){return this.arcLength},t.prototype.updateArcLengths=function(){var t=this.startPoint.clone(),e=new n.Vertex(0,0),i=1/this.curveIntervals;this.segmentCache=[],this.segmentCache.push(this.startPoint),this.segmentLengths=[];for(var s,r=0,o=0;o<=1;)e=this.getPointAt(o),this.segmentCache.push(e),s=t.distance(e),this.segmentLengths.push(s),r+=s,t=e,o+=i;this.arcLength=r},t.prototype.getClosestT=function(t){var e={t:0,tPrev:0,tNext:1},i=0;do{e=this.locateIntervalByDistance(t,e.tPrev,e.tNext,this.curveIntervals),i++}while(i<4&&this.getPointAt(e.tPrev).distance(this.getPointAt(e.tNext))>1);return e.t},t.prototype.locateIntervalByDistance=function(t,e,i,s){for(var r=-1,n=0,o=0,a=i-e,h=0;h<=s;h++){o=e+a*(h/s);var l=this.getPointAt(o).distance(t);(-1==r||l<n)&&(r=h,n=l)}return{t:e+a*(r/s),tPrev:e+a*(Math.max(0,r-1)/s),tNext:e+a*(Math.min(s,r+1)/s)}},t.prototype.getBounds=function(){for(var t,e=new n.Vertex(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),i=new n.Vertex(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),r=0;r<this.segmentCache.length;r++)t=this.segmentCache[r],e.x=Math.min(e.x,t.x),e.y=Math.min(e.y,t.y),i.x=Math.max(i.x,t.x),i.y=Math.max(i.y,t.y);return new s.Bounds(e,i)},t.prototype.getStartPoint=function(){return this.startPoint},t.prototype.getEndPoint=function(){return this.endPoint},t.prototype.getStartControlPoint=function(){return this.startControlPoint},t.prototype.getEndControlPoint=function(){return this.endControlPoint},t.prototype.getPointByID=function(t){if(t==this.START_POINT)return this.startPoint;if(t==this.END_POINT)return this.endPoint;if(t==this.START_CONTROL_POINT)return this.startControlPoint;if(t==this.END_CONTROL_POINT)return this.endControlPoint;throw new Error("Invalid point ID '"+t+"'.")},t.prototype.getPointAt=function(t){var e=this.startPoint.x*Math.pow(1-t,3)+3*this.startControlPoint.x*t*Math.pow(1-t,2)+3*this.endControlPoint.x*Math.pow(t,2)*(1-t)+this.endPoint.x*Math.pow(t,3),i=this.startPoint.y*Math.pow(1-t,3)+3*this.startControlPoint.y*t*Math.pow(1-t,2)+3*this.endControlPoint.y*Math.pow(t,2)*(1-t)+this.endPoint.y*Math.pow(t,3);return new n.Vertex(e,i)},t.prototype.getPoint=function(t){return this.getPointAt(t/this.arcLength)},t.prototype.getTangentAt=function(t){var e=this.getStartPoint(),i=this.getStartControlPoint(),s=this.getEndControlPoint(),r=this.getEndPoint(),o=t*t,a=1-2*t+o,h=-3*e.x*a+i.x*(3*a-6*(t-o))+s.x*(6*(t-o)-3*o)+3*r.x*o,l=-3*e.y*a+i.y*(3*a-6*(t-o))+s.y*(6*(t-o)-3*o)+3*r.y*o;return new n.Vertex(h,l)},t.prototype.getSubCurveAt=function(e,i){var s=new o.Vector(this.getPointAt(e),this.getTangentAt(e)),r=new o.Vector(this.getPointAt(i),this.getTangentAt(i).inv());return s.b.add(s.a),r.b.add(r.a),s.scale(.33333333*(i-e)),r.scale(.33333333*(i-e)),new t(s.a,r.a,s.b,r.b)},t.prototype.convertU2T=function(t){return Math.max(0,Math.min(1,t/this.arcLength))},t.prototype.getTangent=function(t){return this.getTangentAt(this.convertU2T(t))},t.prototype.getPerpendicular=function(t){return this.getPerpendicularAt(this.convertU2T(t))},t.prototype.getPerpendicularAt=function(t){var e=this.getTangentAt(t);return new n.Vertex(e.y,-e.x)},t.prototype.clone=function(){return new t(this.getStartPoint().clone(),this.getEndPoint().clone(),this.getStartControlPoint().clone(),this.getEndControlPoint().clone())},t.prototype.equals=function(t){return!!t&&!!(t.startPoint&&t.endPoint&&t.startControlPoint&&t.endControlPoint)&&this.startPoint.equals(t.startPoint)&&this.endPoint.equals(t.endPoint)&&this.startControlPoint.equals(t.startControlPoint)&&this.endControlPoint.equals(t.endControlPoint)},t.isInstance=function(e){return e instanceof t},t.prototype.toSVGPathData=function(){var t=[];return t.push("M "),t.push(this.startPoint.x.toString()),t.push(" "),t.push(this.startPoint.y.toString()),t.push(" C "),t.push(this.startControlPoint.x.toString()),t.push(" "),t.push(this.startControlPoint.y.toString()),t.push(" "),t.push(this.endControlPoint.x.toString()),t.push(" "),t.push(this.endControlPoint.y.toString()),t.push(" "),t.push(this.endPoint.x.toString()),t.push(" "),t.push(this.endPoint.y.toString()),t.join("")},t.prototype.toJSON=function(t){return"{ "+(t?"\n\t":"")+'"startPoint" : ['+this.getStartPoint().x+","+this.getStartPoint().y+"], "+(t?"\n\t":"")+'"endPoint" : ['+this.getEndPoint().x+","+this.getEndPoint().y+"], "+(t?"\n\t":"")+'"startControlPoint": ['+this.getStartControlPoint().x+","+this.getStartControlPoint().y+"], "+(t?"\n\t":"")+'"endControlPoint" : ['+this.getEndControlPoint().x+","+this.getEndControlPoint().y+"]"+(t?"\n\t":"")+" }"},t.fromJSON=function(e){var i=JSON.parse(e);return t.fromObject(i)},t.fromObject=function(e){if("object"!=typeof e)throw"Can only build from object.";if(!e.startPoint)throw'Object member "startPoint" missing.';if(!e.endPoint)throw'Object member "endPoint" missing.';if(!e.startControlPoint)throw'Object member "startControlPoint" missing.';if(!e.endControlPoint)throw'Object member "endControlPoint" missing.';return new t(new n.Vertex(e.startPoint[0],e.startPoint[1]),new n.Vertex(e.endPoint[0],e.endPoint[1]),new n.Vertex(e.startControlPoint[0],e.startControlPoint[1]),new n.Vertex(e.endControlPoint[0],e.endControlPoint[1]))},t.fromArray=function(e){if(!Array.isArray(e))throw"Can only build from object.";if(4!=e.length)throw"Can only build from array with four elements.";return new t(e[0],e[1],e[2],e[3])},t.START_POINT=0,t.START_CONTROL_POINT=1,t.END_CONTROL_POINT=2,t.END_POINT=3,t}();e.CubicBezierCurve=a},82:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=void 0;var i=function(){function t(t,e){this.center=t,this.size=e}return t.utils={baseLog:function(t,e){return Math.log(t)/Math.log(e)},mapRasterScale:function(e,i){var s=1;return i>=1?(s=Math.abs(Math.floor(1/t.utils.baseLog(e,i))),s=1/Math.pow(e,s)):s=Math.abs(Math.floor(t.utils.baseLog(1/e,1/(i+1)))),s}},t}();e.Grid=i},436:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyHandler=void 0;var i=function(){function t(t){this.downListeners=[],this.pressListeners=[],this.upListeners=[],this.keyStates={},t=t||{},this.element=t.element?t.element:globalThis,this.downListeners=[],this.pressListeners=[],this.upListeners=[],this.keyStates=[],this.trackAllKeys=t.trackAll||!1,this.installListeners()}return t.prototype.fireEvent=function(t,e){var i=!1;for(var s in e){var r=e[s];r.keyCode==t.keyCode&&(r.listener(t),i=!0)}return i},t.prototype.fireDownEvent=function(t,e){(e.fireEvent(t,e.downListeners)||e.trackAllKeys)&&(e.keyStates[t.keyCode]="down")},t.prototype.firePressEvent=function(t,e){e.fireEvent(t,e.pressListeners)},t.prototype.fireUpEvent=function(t,e){(e.fireEvent(t,e.upListeners)||e.trackAllKeys)&&delete e.keyStates[t.keyCode]},t.key2code=function(e){if("number"==typeof e)return e;if("string"!=typeof e)throw"Unknown key name or key type (should be a string or integer): "+e;if(t.KEY_CODES[e])return t.KEY_CODES[e];throw"Unknown key (cannot resolve key code): "+e},t.prototype.installListeners=function(){var t=this;this.element.addEventListener("keydown",this._keyDownListener=function(e){t.fireDownEvent(e,t)}),this.element.addEventListener("keypress",this._keyPressListener=function(e){t.firePressEvent(e,t)}),this.element.addEventListener("keyup",this._keyUpListener=function(e){t.fireUpEvent(e,t)})},t.prototype.releaseListeners=function(){this.element.removeEventListener("keydown",this._keyDownListener),this.element.removeEventListener("keypress",this._keyPressListener),this.element.removeEventListener("keyup",this._keyUpListener)},t.prototype.down=function(e,i){return this.downListeners.push({key:e,keyCode:t.key2code(e),listener:i}),this},t.prototype.press=function(e,i){return this.pressListeners.push({key:e,keyCode:t.key2code(e),listener:i}),this},t.prototype.up=function(e,i){return this.upListeners.push({key:e,keyCode:t.key2code(e),listener:i}),this},t.prototype.isDown=function(e){return"number"==typeof e?!!this.keyStates[e]:!!this.keyStates[t.key2code(e)]},t.KEY_CODES={break:3,backspace:8,tab:9,clear:12,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,hangul:21,hanja:25,escape:27,conversion:28,"non-conversion":29,spacebar:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,select:41,print:42,execute:43,printscreen:44,insert:45,delete:46,help:47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,"semicolon (firefox)":59,equals:59,"<":60,"equals (firefox)":61,ß:63,"@ (firefox)":64,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,windows:91,leftcommand:91,chromebooksearch:91,rightwindowkey:92,windowsmenu:93,rightcommant:93,sleep:95,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,numpadperiod:108,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130,f20:131,f21:132,f22:133,f23:134,f24:135,numlock:144,scrolllock:145,"^":160,"!":161,"#":163,$:164,ù:165,pagebackward:166,pageforward:167,refresh:168,closingparen:169,"*":170,"~+*":171,minus:173,decreasevolumelevel:174,increasevolumelevel:175,next:176,previous:177,stop:178,"play/pause":179,email:180,mute:181,unmute:181,semicolon:186,ñ:186,equal:187,comma:188,dash:189,period:190,forwardslash:191,ç:191,"grave accent":192,æ:192,ö:192,"?":193,"/":193,"°":193,openbracket:219,backslash:220,closebracket:221,å:221,singlequote:222,ø:222,ä:222,"`":223,altgr:225,"GNOME Compose Key":230,XF86Forward:233,XF86Back:234,alphanumeric:240,hiragana:242,katakana:242,"half-width":243,"full-width":243,kanji:244,unlocktrackpad:251,toggletouchpad:255},t}();e.KeyHandler=i},198:function(t,e,i){var s,r=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var n=i(7),o=i(909),a=function(t){function e(i,s){var r=t.call(this,i,s,(function(t,i){return new e(t,i)}))||this;return r.className="Line",r}return r(e,t),e.prototype.intersection=function(t){var e=this.denominator(t);if(0==e)return null;var i=this.a.y-t.a.y,s=this.a.x-t.a.x,r=(t.b.x-t.a.x)*i-(t.b.y-t.a.y)*s,n=(this.b.x-this.a.x)*i-(this.b.y-this.a.y)*s;i=r/e,s=n/e;var a=this.a.x+i*(this.b.x-this.a.x),h=this.a.y+i*(this.b.y-this.a.y);return isNaN(i)||isNaN(a)||isNaN(h)?void 0:new o.Vertex(a,h)},e.prototype.toSVGString=function(t){t=t||{};var e=[];return e.push("<line"),t.className&&e.push(' class="'+t.className+'"'),e.push(' x1="'+this.a.x+'"'),e.push(' y1="'+this.a.y+'"'),e.push(' x2="'+this.b.x+'"'),e.push(' y2="'+this.b.y+'"'),e.push(" />"),e.join("")},e}(n.VertTuple);e.Line=a},676:function(t,e){var i,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"__esModule",{value:!0}),e.MouseHandler=e.XWheelEvent=e.XMouseEvent=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(MouseEvent);e.XMouseEvent=r;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(WheelEvent);e.XWheelEvent=n;var o=function(){function t(t,e){this.mouseDownPos=void 0,this.mouseDragPos=void 0,this.mousePos=void 0,this.mouseButton=-1,this.listeners={},this.installed={},this.handlers={},this.name=e,this.element=t,this.mouseDownPos=null,this.mouseDragPos=null,this.mousePos=null,this.mouseButton=-1,this.listeners={},this.installed={},this.handlers={};var i=this;this.handlers.mousemove=function(t){i.listeners.mousemove&&i.listeners.mousemove(i.mkParams(t,"mousemove")),i.mouseDragPos&&i.listeners.drag&&i.listeners.drag(i.mkParams(t,"drag")),i.mouseDownPos&&(i.mouseDragPos=i.relPos(t))},this.handlers.mouseup=function(t){i.listeners.mouseup&&i.listeners.mouseup(i.mkParams(t,"mouseup")),i.mouseDragPos=void 0,i.mouseDownPos=void 0,i.mouseButton=-1},this.handlers.mousedown=function(t){i.mouseDragPos=i.relPos(t),i.mouseDownPos=i.relPos(t),i.mouseButton=t.button,i.listeners.mousedown&&i.listeners.mousedown(i.mkParams(t,"mousedown"))},this.handlers.click=function(t){i.listeners.click&&i.listeners.click(i.mkParams(t,"click"))},this.handlers.wheel=function(t){i.listeners.wheel&&i.listeners.wheel(i.mkParams(t,"wheel"))},this.element.addEventListener("mousemove",this.handlers.mousemove),this.element.addEventListener("mouseup",this.handlers.mouseup),this.element.addEventListener("mousedown",this.handlers.mousedown),this.element.addEventListener("click",this.handlers.click),this.element.addEventListener("wheel",this.handlers.wheel)}return t.prototype.relPos=function(t){return{x:t.offsetX,y:t.offsetY}},t.prototype.mkParams=function(t,e){var i=this.relPos(t),s=t;return s.params={element:this.element,name:e,isTouchEvent:!1,pos:i,button:this.mouseButton,leftButton:0==this.mouseButton,middleButton:1==this.mouseButton,rightButton:2==this.mouseButton,mouseDownPos:this.mouseDownPos,draggedFrom:this.mouseDragPos,wasDragged:null!=this.mouseDownPos&&(this.mouseDownPos.x!=i.x||this.mouseDownPos.y!=i.y),dragAmount:null!=this.mouseDownPos?{x:i.x-this.mouseDragPos.x,y:i.y-this.mouseDragPos.y}:{x:0,y:0}},s},t.prototype.listenFor=function(t){this.installed[t]||(this.installed[t]=!0)},t.prototype.unlistenFor=function(t){this.installed[t]&&delete this.installed[t]},t.prototype.drag=function(t){return this.listeners.drag&&this.throwAlreadyInstalled("drag"),this.listeners.drag=t,this.listenFor("mousedown"),this.listenFor("mousemove"),this.listenFor("mouseup"),this},t.prototype.move=function(t){return this.listeners.mousemove&&this.throwAlreadyInstalled("mousemove"),this.listenFor("mousemove"),this.listeners.mousemove=t,this},t.prototype.up=function(t){return this.listeners.mouseup&&this.throwAlreadyInstalled("mouseup"),this.listenFor("mouseup"),this.listeners.mouseup=t,this},t.prototype.down=function(t){return this.listeners.mousedown&&this.throwAlreadyInstalled("mousedown"),this.listenFor("mousedown"),this.listeners.mousedown=t,this},t.prototype.click=function(t){return this.listeners.click&&this.throwAlreadyInstalled("click"),this.listenFor("click"),this.listeners.click=t,this},t.prototype.wheel=function(t){return this.listeners.wheel&&this.throwAlreadyInstalled("wheel"),this.listenFor("wheel"),this.listeners.wheel=t,this},t.prototype.throwAlreadyInstalled=function(t){throw"This MouseHandler already has a '"+t+"' callback. To keep the code simple there is only room for one."},t.prototype.destroy=function(){this.unlistenFor("mousedown"),this.unlistenFor("mousemove"),this.unlistenFor("moseup"),this.unlistenFor("click"),this.unlistenFor("wheel"),this.element.removeEventListener("mousemove",this.handlers.mousemove),this.element.removeEventListener("mouseup",this.handlers.mousedown),this.element.removeEventListener("mousedown",this.handlers.mousedown),this.element.removeEventListener("click",this.handlers.click),this.element.removeEventListener("wheel",this.handlers.wheel)},t}();e.MouseHandler=o},810:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PBImage=void 0;var s=i(919),r=function(){function t(t,e,i){this.className="PBImage",this.uid=s.UIDGenerator.next(),this.image=t,this.upperLeft=e,this.lowerRight=i}return t.prototype.toSVGString=function(t){return console.warn("PBImage is not yet SVG serializable. Returning empty SVG string."),""},t}();e.PBImage=r},378:(t,e,i)=>{e.H=void 0;var s=i(836),r=i(121),n=i(923),o=i(432),a=i(710),h=i(991),l=i(210),c=i(82),u=i(436),d=i(198),f=i(676),p=i(810),y=i(180),g=i(128),v=i(591),x=i(185),b=i(609),m=i(909),w=i(954),C=function(){function t(e){if(w.VertexAttr.model={bezierAutoAdjust:!1,renderTime:0,selectable:!0,isSelected:!1,draggable:!0,visible:!0},void 0===e.canvas)throw"No canvas specified.";var i=t.utils.fetch;this.config={canvas:e.canvas,fullSize:i.val(e,"fullSize",!0),fitToParent:i.bool(e,"fitToParent",!0),scaleX:i.num(e,"scaleX",1),scaleY:i.num(e,"scaleY",1),offsetX:i.num(e,"offsetX",0),offsetY:i.num(e,"offsetY",0),rasterGrid:i.bool(e,"rasterGrid",!0),rasterScaleX:i.num(e,"rasterScaleX",1),rasterScaleY:i.num(e,"rasterScaleY",1),rasterAdjustFactor:i.num(e,"rasterAdjustdFactror",2),drawOrigin:i.bool(e,"drawOrigin",!1),autoAdjustOffset:i.val(e,"autoAdjustOffset",!0),offsetAdjustXPercent:i.num(e,"offsetAdjustXPercent",50),offsetAdjustYPercent:i.num(e,"offsetAdjustYPercent",50),backgroundColor:e.backgroundColor||"#ffffff",redrawOnResize:i.bool(e,"redrawOnResize",!0),defaultCanvasWidth:i.num(e,"defaultCanvasWidth",t.DEFAULT_CANVAS_WIDTH),defaultCanvasHeight:i.num(e,"defaultCanvasHeight",t.DEFAULT_CANVAS_HEIGHT),canvasWidthFactor:i.num(e,"canvasWidthFactor",1),canvasHeightFactor:i.num(e,"canvasHeightFactor",1),cssScaleX:i.num(e,"cssScaleX",1),cssScaleY:i.num(e,"cssScaleY",1),cssUniformScale:i.bool(e,"cssUniformScale",!0),saveFile:function(){a.hooks.saveFile(a)},setToRetina:function(){a._setToRetina()},autoDetectRetina:i.bool(e,"autoDetectRetina",!0),enableSVGExport:i.bool(e,"enableSVGExport",!0),preClear:i.func(e,"preClear",null),preDraw:i.func(e,"preDraw",null),postDraw:i.func(e,"postDraw",null),enableMouse:i.bool(e,"enableMouse",!0),enableTouch:i.bool(e,"enableTouch",!0),enableKeys:i.bool(e,"enableKeys",!0),enableMouseWheel:i.bool(e,"enableMouseWheel",!0),enableGL:i.bool(e,"enableGL",!1)},this.drawConfig={drawVertices:!0,drawBezierHandleLines:i.bool(e,"drawBezierHandleLines",!0),drawBezierHandlePoints:i.bool(e,"drawBezierHandlePoints",!0),drawHandleLines:i.bool(e,"drawHandleLines",!0),drawHandlePoints:i.bool(e,"drawHandlePoints",!0),drawGrid:i.bool(e,"drawGrid",!0),bezier:{color:"#00a822",lineWidth:2,handleLine:{color:"rgba(180,180,180,0.5)",lineWidth:1}},polygon:{color:"#0022a8",lineWidth:1},triangle:{color:"#6600ff",lineWidth:1},ellipse:{color:"#2222a8",lineWidth:1},circle:{color:"#22a8a8",lineWidth:2},circleSector:{color:"#2280a8",lineWidth:1},vertex:{color:"#a8a8a8",lineWidth:1},selectedVertex:{color:"#c08000",lineWidth:2},line:{color:"#a844a8",lineWidth:1},vector:{color:"#ff44a8",lineWidth:1},image:{color:"#a8a8a8",lineWidth:1}},this.grid=new c.Grid(new m.Vertex(0,0),new m.Vertex(50,50)),this.canvasSize={width:t.DEFAULT_CANVAS_WIDTH,height:t.DEFAULT_CANVAS_HEIGHT};var o="string"==typeof e.canvas?document.querySelector(e.canvas):e.canvas;if("canvas"===o.tagName.toLowerCase())this.canvas=o,this.eventCatcher=this.canvas,this.config.enableGL?(this.ctx=this.canvas.getContext("webgl"),this.draw=new r.drawutilsgl(this.ctx,!1),this.fill=this.draw.copyInstance(!0),console.warn("Initialized with experimental mode enableGL=true. Note that this is not yet fully implemented.")):(this.ctx=this.canvas.getContext("2d"),this.draw=new s.drawutils(this.ctx,!1),this.fill=new s.drawutils(this.ctx,!0));else{if("svg"!==o.tagName.toLowerCase())throw"Element is neither a canvas nor an svg element.";if(void 0===n.drawutilssvg)throw"The svg draw library is not yet integrated part of PlotBoilerplate. Please include ./src/js/utils/helpers/drawutils.svg into your document.";this.canvas=o,this.draw=new n.drawutilssvg(this.canvas,new m.Vertex,new m.Vertex,this.canvasSize,!1),this.fill=new n.drawutilssvg(this.canvas,new m.Vertex,new m.Vertex,this.canvasSize,!0),this.canvas.parentElement?(this.eventCatcher=document.createElement("div"),this.eventCatcher.style.position="absolute",this.eventCatcher.style.left="0",this.eventCatcher.style.top="0",this.canvas.parentElement.style.position="relative",this.canvas.parentElement.appendChild(this.eventCatcher)):this.eventCatcher=document.body}this.draw.scale.set(this.config.scaleX,this.config.scaleY),this.fill.scale.set(this.config.scaleX,this.config.scaleY),this.vertices=[],this.selectPolygon=null,this.draggedElements=[],this.drawables=[],this.console=console,this.hooks={saveFile:t._saveFile};var a=this;globalThis.addEventListener("resize",(function(){return a.resizeCanvas()})),this.resizeCanvas(),e.autoDetectRetina&&this._setToRetina(),this.installInputListeners(),this.updateCSSscale(),this.redraw(),this.canvas.focus()}var e;return t._saveFile=function(t){var e=(new g.SVGBuilder).build(t.drawables,{canvasSize:t.canvasSize,offset:t.draw.offset,zoom:t.draw.scale}),i=new Blob([e],{type:"image/svg;charset=utf-8"});if("function"!=typeof globalThis.saveAs)throw"Cannot save file; did you load the ./utils/savefile helper function and the eligrey/SaveFile library?";(0,globalThis.saveAs)(i,"plotboilerplate.svg")},t.prototype._setToRetina=function(){this.config.autoDetectRetina=!0;var t=globalThis.devicePixelRatio||1;this.config.cssScaleX=this.config.cssScaleY=1/t,this.config.canvasWidthFactor=this.config.canvasHeightFactor=t,this.resizeCanvas(),this.updateCSSscale()},t.prototype.fitToView=function(t){var e=new m.Vertex(this.canvasSize.width/2,this.canvasSize.height/2),i=this.canvasSize.width/this.canvasSize.height,s=t.width/t.height,r=new m.Vertex(t.max.x-t.width/2,t.max.y-t.height/2).inv().addXY(this.canvasSize.width/2,this.canvasSize.height/2);if(this.setOffset(r),i<s){var n=this.canvasSize.width/t.width;this.setZoom(n,n,e)}else n=this.canvasSize.height/t.height,this.setZoom(n,n,e);this.redraw()},t.prototype.setConsole=function(t){this.console=t},t.prototype.updateCSSscale=function(){this.config.cssUniformScale?t.utils.setCSSscale(this.canvas,this.config.cssScaleX,this.config.cssScaleX):t.utils.setCSSscale(this.canvas,this.config.cssScaleX,this.config.cssScaleY)},t.prototype.add=function(e,i){if(Array.isArray(e))for(var s=e,r=0;r<s.length;r++)this.add(s[r],!1);else if(e instanceof m.Vertex)this.drawables.push(e),this.vertices.push(e);else if(e instanceof d.Line)this.drawables.push(e),this.vertices.push(e.a),this.vertices.push(e.b);else if(e instanceof b.Vector)this.drawables.push(e),this.vertices.push(e.a),this.vertices.push(e.b);else if(e instanceof x.VEllipse)this.vertices.push(e.center),this.vertices.push(e.axis),this.drawables.push(e),e.center.listeners.addDragListener((function(t){e.axis.add(t.params.dragAmount)}));else if(e instanceof h.Circle)this.vertices.push(e.center),this.drawables.push(e);else if(e instanceof l.CircleSector)this.vertices.push(e.circle.center),this.drawables.push(e);else if(e instanceof y.Polygon)for(this.drawables.push(e),r=0;r<e.vertices.length;r++)this.vertices.push(e.vertices[r]);else if(e instanceof v.Triangle)this.drawables.push(e),this.vertices.push(e.a),this.vertices.push(e.b),this.vertices.push(e.c);else if(e instanceof o.BezierPath){this.drawables.push(e);var n=e;for(r=0;r<n.bezierCurves.length;r++)e.adjustCircular||0!=r||this.vertices.push(n.bezierCurves[r].startPoint),this.vertices.push(n.bezierCurves[r].endPoint),this.vertices.push(n.bezierCurves[r].startControlPoint),this.vertices.push(n.bezierCurves[r].endControlPoint),n.bezierCurves[r].startControlPoint.attr.selectable=!1,n.bezierCurves[r].endControlPoint.attr.selectable=!1;t.utils.enableBezierPathAutoAdjust(e)}else{if(!(e instanceof p.PBImage))throw"Cannot add drawable of unrecognized type: "+typeof e+".";this.vertices.push(e.upperLeft),this.vertices.push(e.lowerRight),this.drawables.push(e),e.upperLeft.listeners.addDragListener((function(t){e.lowerRight.add(t.params.dragAmount)})),e.lowerRight.attr.selectable=!1}(i||void 0===i)&&this.redraw()},t.prototype.remove=function(t,e,i){t instanceof m.Vertex&&this.removeVertex(t,!1);for(var s=0;s<this.drawables.length;s++)if(this.drawables[s]===t){if(this.drawables.splice(s,1),i)if(t instanceof d.Line)this.removeVertex(t.a,!1),this.removeVertex(t.b,!1);else if(t instanceof b.Vector)this.removeVertex(t.a,!1),this.removeVertex(t.b,!1);else if(t instanceof x.VEllipse)this.removeVertex(t.center,!1),this.removeVertex(t.axis,!1);else if(t instanceof h.Circle)this.removeVertex(t.center,!1);else if(t instanceof l.CircleSector)this.removeVertex(t.circle.center,!1);else if(t instanceof y.Polygon)for(s=0;s<t.vertices.length;s++)this.removeVertex(t.vertices[s],!1);else if(t instanceof v.Triangle)this.removeVertex(t.a,!1),this.removeVertex(t.b,!1),this.removeVertex(t.c,!1);else if(t instanceof o.BezierPath)for(s=0;s<t.bezierCurves.length;s++)this.removeVertex(t.bezierCurves[s].startPoint,!1),this.removeVertex(t.bezierCurves[s].startControlPoint,!1),this.removeVertex(t.bezierCurves[s].endControlPoint,!1),s+1==t.bezierCurves.length&&this.removeVertex(t.bezierCurves[s].endPoint,!1);else t instanceof p.PBImage&&(this.removeVertex(t.upperLeft,!1),this.removeVertex(t.lowerRight,!1));return void(e&&this.redraw())}},t.prototype.removeVertex=function(t,e){for(var i=0;i<this.vertices.length;i++)if(this.vertices[i]===t)return this.vertices.splice(i,1),void(e&&this.redraw())},t.prototype.removeAll=function(t){this.drawables=[],Boolean(t)||(this.vertices=[]),this.redraw()},t.prototype.getVertexNear=function(t,e){var i=this.locatePointNear(this.transformMousePosition(t.x,t.y),e/Math.min(this.config.cssScaleX,this.config.cssScaleY));if(i&&"vertex"==i.typeName)return this.vertices[i.vindex]},t.prototype.drawGrid=function(t){var e=c.Grid.utils.mapRasterScale(this.config.rasterAdjustFactor,this.draw.scale.x)*this.config.rasterScaleX/this.config.cssScaleX,i=c.Grid.utils.mapRasterScale(this.config.rasterAdjustFactor,this.draw.scale.y)*this.config.rasterScaleY/this.config.cssScaleY,s={width:this.grid.size.x*e,height:this.grid.size.y*i},r=this.canvasSize.width/2,n=this.canvasSize.height/2,o=this.draw.offset.clone().inv();o.x=Math.round(o.x+r)/Math.round(s.width)*s.width/this.draw.scale.x+(this.draw.offset.x-r)/this.draw.scale.x%s.width,o.y=Math.round(o.y+n)/Math.round(s.height)*s.height/this.draw.scale.y+(this.draw.offset.y-n)/this.draw.scale.x%s.height,this.drawConfig.drawGrid&&(this.config.rasterGrid?t.raster(o,this.canvasSize.width/this.draw.scale.x,this.canvasSize.height/this.draw.scale.y,s.width,s.height,"rgba(0,128,255,0.125)"):t.grid(o,this.canvasSize.width/this.draw.scale.x,this.canvasSize.height/this.draw.scale.y,s.width,s.height,"rgba(0,128,255,0.095)"))},t.prototype.drawOrigin=function(t){t.crosshair({x:0,y:0},10,"#000000")},t.prototype._handleColor=function(t,e){return t.attr.isSelected?this.drawConfig.selectedVertex.color:t.attr.draggable?e:"rgba(128,128,128,0.5)"},t.prototype.drawDrawables=function(t,e,i){for(var s in this.drawables)this.drawDrawable(this.drawables[s],t,e,i)},t.prototype.drawDrawable=function(t,e,i,s){if(t instanceof o.BezierPath)for(var r in t.bezierCurves)i.cubicBezier(t.bezierCurves[r].startPoint,t.bezierCurves[r].endPoint,t.bezierCurves[r].startControlPoint,t.bezierCurves[r].endControlPoint,this.drawConfig.bezier.color,this.drawConfig.bezier.lineWidth),this.drawConfig.drawBezierHandlePoints&&this.drawConfig.drawHandlePoints?(t.bezierCurves[r].startPoint.attr.bezierAutoAdjust||(t.bezierCurves[r].startPoint.attr.visible&&i.diamondHandle(t.bezierCurves[r].startPoint,7,this._handleColor(t.bezierCurves[r].startPoint,this.drawConfig.vertex.color)),t.bezierCurves[r].startPoint.attr.renderTime=e),t.bezierCurves[r].endPoint.attr.bezierAutoAdjust||(t.bezierCurves[r].endPoint.attr.visible&&i.diamondHandle(t.bezierCurves[r].endPoint,7,this._handleColor(t.bezierCurves[r].endPoint,this.drawConfig.vertex.color)),t.bezierCurves[r].endPoint.attr.renderTime=e),t.bezierCurves[r].startControlPoint.attr.visible&&i.circleHandle(t.bezierCurves[r].startControlPoint,3,this._handleColor(t.bezierCurves[r].startControlPoint,"#008888")),t.bezierCurves[r].endControlPoint.attr.visible&&i.circleHandle(t.bezierCurves[r].endControlPoint,3,this._handleColor(t.bezierCurves[r].endControlPoint,"#008888")),t.bezierCurves[r].startControlPoint.attr.renderTime=e,t.bezierCurves[r].endControlPoint.attr.renderTime=e):(t.bezierCurves[r].startPoint.attr.renderTime=e,t.bezierCurves[r].endPoint.attr.renderTime=e,t.bezierCurves[r].startControlPoint.attr.renderTime=e,t.bezierCurves[r].endControlPoint.attr.renderTime=e),this.drawConfig.drawBezierHandleLines&&this.drawConfig.drawHandleLines&&(i.line(t.bezierCurves[r].startPoint,t.bezierCurves[r].startControlPoint,this.drawConfig.bezier.handleLine.color,this.drawConfig.bezier.handleLine.lineWidth),i.line(t.bezierCurves[r].endPoint,t.bezierCurves[r].endControlPoint,this.drawConfig.bezier.handleLine.color,this.drawConfig.bezier.handleLine.lineWidth));else if(t instanceof y.Polygon){if(i.polygon(t,this.drawConfig.polygon.color,this.drawConfig.polygon.lineWidth),!this.drawConfig.drawHandlePoints)for(var n in t.vertices)t.vertices[n].attr.renderTime=e}else t instanceof v.Triangle?(i.polyline([t.a,t.b,t.c],!1,this.drawConfig.triangle.color,this.drawConfig.triangle.lineWidth),this.drawConfig.drawHandlePoints||(t.a.attr.renderTime=t.b.attr.renderTime=t.c.attr.renderTime=e)):t instanceof x.VEllipse?(this.drawConfig.drawHandleLines&&(i.line(t.center.clone().add(0,t.axis.y-t.center.y),t.axis,"#c8c8c8"),i.line(t.center.clone().add(t.axis.x-t.center.x,0),t.axis,"#c8c8c8")),i.ellipse(t.center,Math.abs(t.axis.x-t.center.x),Math.abs(t.axis.y-t.center.y),this.drawConfig.ellipse.color,this.drawConfig.ellipse.lineWidth),this.drawConfig.drawHandlePoints||(t.center.attr.renderTime=e,t.axis.attr.renderTime=e)):t instanceof h.Circle?i.circle(t.center,t.radius,this.drawConfig.circle.color,this.drawConfig.circle.lineWidth):t instanceof l.CircleSector?i.circleArc(t.circle.center,t.circle.radius,t.startAngle,t.endAngle,this.drawConfig.circleSector.color,this.drawConfig.circleSector.lineWidth):t instanceof m.Vertex?!this.drawConfig.drawVertices||t.attr.selectable&&t.attr.draggable||!t.attr.visible||(i.circleHandle(t,7,this.drawConfig.vertex.color),t.attr.renderTime=e):t instanceof d.Line?(i.line(t.a,t.b,this.drawConfig.line.color,this.drawConfig.line.lineWidth),this.drawConfig.drawHandlePoints&&t.a.attr.selectable||(t.a.attr.renderTime=e),this.drawConfig.drawHandlePoints&&t.b.attr.selectable||(t.b.attr.renderTime=e)):t instanceof b.Vector?(i.arrow(t.a,t.b,this.drawConfig.vector.color),this.drawConfig.drawHandlePoints&&t.b.attr.selectable&&t.b.attr.visible?i.circleHandle(t.b,3,"#a8a8a8"):t.b.attr.renderTime=e,this.drawConfig.drawHandlePoints&&t.a.attr.selectable||(t.a.attr.renderTime=e),this.drawConfig.drawHandlePoints&&t.b.attr.selectable||(t.b.attr.renderTime=e)):t instanceof p.PBImage?(this.drawConfig.drawHandleLines&&i.line(t.upperLeft,t.lowerRight,this.drawConfig.image.color,this.drawConfig.image.lineWidth),s.image(t.image,t.upperLeft,t.lowerRight.clone().sub(t.upperLeft)),this.drawConfig.drawHandlePoints&&(i.circleHandle(t.lowerRight,3,this.drawConfig.image.color),t.lowerRight.attr.renderTime=e)):console.error("Cannot draw object. Unknown class.")},t.prototype.drawSelectPolygon=function(t){null!=this.selectPolygon&&this.selectPolygon.vertices.length>0&&(t.polygon(this.selectPolygon,"#888888"),t.crosshair(this.selectPolygon.vertices[0],3,"#008888"))},t.prototype.drawVertices=function(t,e){for(var i in this.vertices)this.drawConfig.drawVertices&&this.vertices[i].attr.renderTime!=t&&this.vertices[i].attr.visible&&e.squareHandle(this.vertices[i],5,this._handleColor(this.vertices[i],"rgb(0,128,192)"))},t.prototype.redraw=function(){var t=(new Date).getTime();this.config.preClear&&this.config.preClear(),this.clear(),this.config.preDraw&&this.config.preDraw(),this.drawAll(t,this.draw,this.fill),this.config.postDraw&&this.config.postDraw()},t.prototype.drawAll=function(t,e,i){e.beginDrawCycle(),i.beginDrawCycle(),this.drawGrid(e),this.config.drawOrigin&&this.drawOrigin(e),this.drawDrawables(t,e,i),this.drawVertices(t,e),this.drawSelectPolygon(e)},t.prototype.clear=function(){this.draw.clear(this.config.backgroundColor)},t.prototype.clearSelection=function(t){for(var e in this.vertices)this.vertices[e].attr.isSelected=!1;return t&&this.redraw(),this},t.prototype.viewport=function(){return new a.Bounds(this.transformMousePosition(0,0),this.transformMousePosition(this.canvasSize.width*this.config.cssScaleX,this.canvasSize.height*this.config.cssScaleY))},t.prototype.saveFile=function(){this.hooks.saveFile(this)},t.prototype.getFProp=function(t,e){return parseFloat(globalThis.getComputedStyle(t,null).getPropertyValue(e))},t.prototype.getAvailableContainerSpace=function(){var t=this,e=t.canvas.parentNode;t.canvas.style.display="none";var i=this.getFProp(e,"padding")||0,s=this.getFProp(t.canvas,"border-width")||0,r=this.getFProp(e,"padding-left")||i,n=this.getFProp(e,"padding-right")||i,o=this.getFProp(e,"padding-top")||i,a=this.getFProp(e,"padding-bottom")||i,h=this.getFProp(t.canvas,"border-left-width")||s,l=this.getFProp(t.canvas,"border-right-width")||s,c=this.getFProp(t.canvas,"border-top-width")||s,u=this.getFProp(t.canvas,"border-bottom-width")||s,d=e.clientWidth,f=e.clientHeight;return t.canvas.style.display="block",{width:d-r-n-h-l,height:f-o-a-c-u}},t.prototype.resizeCanvas=function(){var t=this,e=this,i=function(i,s){i*=e.config.canvasWidthFactor,s*=e.config.canvasHeightFactor,e.canvas instanceof HTMLCanvasElement?(e.canvas.width=i,e.canvas.height=s):e.canvas instanceof SVGElement?(t.canvas.setAttribute("viewBox","0 0 "+i+" "+s),t.canvas.setAttribute("width",""+i),t.canvas.setAttribute("height",""+s),t.eventCatcher.style.width=i+"px",t.eventCatcher.style.height=s+"px"):console.error("Error: cannot resize canvas element because it seems neither be a HTMLCanvasElement nor an SVGElement."),e.canvasSize.width=i,e.canvasSize.height=s,e.config.autoAdjustOffset&&(e.draw.offset.x=e.fill.offset.x=e.config.offsetX=i*(e.config.offsetAdjustXPercent/100),e.draw.offset.y=e.fill.offset.y=e.config.offsetY=s*(e.config.offsetAdjustYPercent/100))};if(e.config.fullSize&&!e.config.fitToParent){var s=globalThis.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=globalThis.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e.canvas.style.position="absolute",e.canvas.style.width=e.config.canvasWidthFactor*s+"px",e.canvas.style.height=e.config.canvasWidthFactor*r+"px",e.canvas.style.top="0px",e.canvas.style.left="0px",i(s,r)}else if(e.config.fitToParent){e.canvas.style.position="absolute";var n=this.getAvailableContainerSpace();e.canvas.style.width=e.config.canvasWidthFactor*n.width+"px",e.canvas.style.height=e.config.canvasHeightFactor*n.height+"px",e.canvas.style.top=null,e.canvas.style.left=null,i(n.width,n.height)}else e.canvas.style.width=null,e.canvas.style.height=null,i(e.config.defaultCanvasWidth,e.config.defaultCanvasHeight);e.config.redrawOnResize&&e.redraw()},t.prototype.selectVerticesInPolygon=function(t){for(var e in this.vertices)this.vertices[e].attr.selectable&&t.containsVert(this.vertices[e])&&(this.vertices[e].attr.isSelected=!0)},t.prototype.locatePointNear=function(e,i){var s=this;void 0===i&&(i=7),i/=s.draw.scale.x;for(var r=0;r<s.vertices.length;r++){var n=s.vertices[r];if((n.attr.draggable||n.attr.selectable)&&n.distance(e)<i)return new t.Draggable(n,t.Draggable.VERTEX).setVIndex(r)}return null},t.prototype.handleClick=function(e){var i=this,s=this.locatePointNear(i.transformMousePosition(e.params.pos.x,e.params.pos.y),t.DEFAULT_CLICK_TOLERANCE/Math.min(i.config.cssScaleX,i.config.cssScaleY));if(s)i.vertices[s.vindex].listeners.fireClickEvent(e),this.keyHandler&&this.keyHandler.isDown("shift")?("bpath"==s.typeName?(r=i.paths[s.pindex].bezierCurves[s.cindex].getPointByID(s.pid)).attr.selectable&&(r.attr.isSelected=!r.attr.isSelected):"vertex"==s.typeName&&(r=i.vertices[s.vindex]).attr.selectable&&(r.attr.isSelected=!r.attr.isSelected),i.redraw()):this.keyHandler.isDown("y")&&(i.vertices[s.vindex].attr.bezierAutoAdjust=!i.vertices[s.vindex].attr.bezierAutoAdjust,i.redraw());else if(null!=i.selectPolygon){var r=i.transformMousePosition(e.params.pos.x,e.params.pos.y);i.selectPolygon.vertices.push(new m.Vertex(r.x,r.y)),i.redraw()}},t.prototype.transformMousePosition=function(t,e){return{x:(t/this.config.cssScaleX-this.config.offsetX)/this.config.scaleX,y:(e/this.config.cssScaleY-this.config.offsetY)/this.config.scaleY}},t.prototype.revertMousePosition=function(t,e){return{x:t/this.config.cssScaleX+this.config.offsetX,y:e/this.config.cssScaleY+this.config.offsetY}},t.prototype.getDraggedElementCount=function(){return this.draggedElements.length},t.prototype.mouseDownHandler=function(e){var i=this;if(1==e.which){var s=i.locatePointNear(i.transformMousePosition(e.params.pos.x,e.params.pos.y),t.DEFAULT_CLICK_TOLERANCE/Math.min(i.config.cssScaleX,i.config.cssScaleY));if(s){if("vertex"==s.typeName&&i.vertices[s.vindex].attr.isSelected)for(var r=0;r<i.vertices.length;r++)i.vertices[r].attr.isSelected&&(i.draggedElements.push(new t.Draggable(i.vertices[r],t.Draggable.VERTEX).setVIndex(r)),i.vertices[r].listeners.fireDragStartEvent(e));else{if(!i.vertices[s.vindex].attr.draggable)return;i.draggedElements.push(s),"bpath"==s.typeName?i.paths[s.pindex].bezierCurves[s.cindex].getPointByID(s.pid).listeners.fireDragStartEvent(e):"vertex"==s.typeName&&i.vertices[s.vindex].listeners.fireDragStartEvent(e)}i.redraw()}}},t.prototype.mouseDragHandler=function(t){var e=this,i={x:t.params.dragAmount.x,y:t.params.dragAmount.y};if(t.params.dragAmount.x/=e.config.cssScaleX,t.params.dragAmount.y/=e.config.cssScaleY,this.keyHandler.isDown("alt")||this.keyHandler.isDown("spacebar"))e.setOffset(e.draw.offset.clone().add(t.params.dragAmount)),e.redraw();else for(var s in t.params.dragAmount.x/=e.draw.scale.x,t.params.dragAmount.y/=e.draw.scale.y,e.draggedElements){var r=e.draggedElements[s];if("bpath"==r.typeName)e.paths[r.pindex].moveCurvePoint(r.cindex,r.pid,new m.Vertex(t.params.dragAmount.x,t.params.dragAmount.y)),e.paths[r.pindex].bezierCurves[r.cindex].getPointByID(r.pid).listeners.fireDragEvent(t);else if("vertex"==r.typeName){if(!e.vertices[r.vindex].attr.draggable)continue;e.vertices[r.vindex].add(t.params.dragAmount),e.vertices[r.vindex].listeners.fireDragEvent(t)}}t.params.dragAmount.x=i.x,t.params.dragAmount.y=i.y,e.redraw()},t.prototype.mouseUpHandler=function(t){var e=this;if(1==t.which){for(var i in t.params.wasDragged||e.handleClick(t),e.draggedElements){var s=e.draggedElements[i];"bpath"==s.typeName?e.paths[s.pindex].bezierCurves[s.cindex].getPointByID(s.pid).listeners.fireDragEndEvent(t):"vertex"==s.typeName&&e.vertices[s.vindex].listeners.fireDragEndEvent(t)}e.draggedElements=[],e.redraw()}},t.prototype.mouseWheelHandler=function(t){var e=1.25,i=this,s=t;s.deltaY<0?i.setZoom(i.config.scaleX*e,i.config.scaleY*e,new m.Vertex(t.params.pos.x,t.params.pos.y)):s.deltaY>0&&i.setZoom(i.config.scaleX/e,i.config.scaleY/e,new m.Vertex(t.params.pos.x,t.params.pos.y)),t.preventDefault(),i.redraw()},t.prototype.setOffset=function(t){this.draw.offset.set(t),this.fill.offset.set(t),this.config.offsetX=t.x,this.config.offsetY=t.y},t.prototype.setZoom=function(t,e,i){var s=this.transformMousePosition(i.x,i.y);this.draw.scale.x=this.fill.scale.x=this.config.scaleX=Math.max(t,.01),this.draw.scale.y=this.fill.scale.y=this.config.scaleY=Math.max(e,.01);var r=this.transformMousePosition(i.x,i.y),n=this.draw.offset.x+(r.x-s.x)*this.draw.scale.x,o=this.draw.offset.y+(r.y-s.y)*this.draw.scale.y;this.setOffset({x:n,y:o})},t.prototype.installInputListeners=function(){var e=this;if(this.config.enableMouse?new f.MouseHandler(this.eventCatcher?this.eventCatcher:this.canvas).down((function(t){e.mouseDownHandler(t)})).drag((function(t){e.mouseDragHandler(t)})).up((function(t){e.mouseUpHandler(t)})):e.console.log("Mouse interaction disabled."),this.config.enableMouseWheel?new f.MouseHandler(this.eventCatcher?this.eventCatcher:this.canvas).wheel((function(t){e.mouseWheelHandler(t)})):e.console.log("Mouse wheel interaction disabled."),this.config.enableTouch){var i=function(t){var i=e.canvas.getBoundingClientRect();return{x:t.x-i.left,y:t.y-i.top}};if(globalThis.AlloyFinger&&"function"==typeof globalThis.AlloyFinger)try{var s=globalThis.AlloyFinger,r=null,n=null,o=null,a=null,h=function(){r=null,n=null,o=null,a=null,e.draggedElements=[]};new s(this.eventCatcher?this.eventCatcher:this.canvas,{touchStart:function(s){if(1==s.touches.length&&(r=new m.Vertex(i({x:s.touches[0].clientX,y:s.touches[0].clientY})),n=new m.Vertex(i({x:s.touches[0].clientX,y:s.touches[0].clientY})),(o=e.locatePointNear(e.transformMousePosition(r.x,r.y),t.DEFAULT_TOUCH_TOLERANCE/Math.min(e.config.cssScaleX,e.config.cssScaleY)))&&"vertex"==o.typeName)){var a=e.vertices[o.vindex],h={params:{isTouchEvent:!0,dragAmount:{x:0,y:0},wasDragged:!1,mouseDownPos:n.clone(),mouseDragPos:n.clone(),vertex:a}};e.draggedElements=[o],a.listeners.fireDragStartEvent(h)}},touchMove:function(t){if(1==t.touches.length&&o){t.preventDefault(),t.stopPropagation();var s=i({x:t.touches[0].clientX,y:t.touches[0].clientY}),a=e.transformMousePosition(s.x,s.y),h=new m.Vertex(e.transformMousePosition(r.x,r.y)).difference(a);if("vertex"==o.typeName){if(!e.vertices[o.vindex].attr.draggable)return;e.vertices[o.vindex].add(h);var l=e.vertices[o.vindex],c={isTouchEvent:!0,params:{dragAmount:h.clone(),wasDragged:!0,mouseDownPos:n.clone(),mouseDragPos:n.clone().add(h),vertex:l}};l.listeners.fireDragEvent(c),e.redraw()}r=new m.Vertex(s)}else 2==t.touches.length&&(t.preventDefault(),t.stopPropagation(),e.setOffset(e.draw.offset.clone().addXY(t.deltaX,t.deltaY)),e.redraw())},touchEnd:function(t){if(o&&"vertex"==o.typeName){var i=e.vertices[o.vindex],s={isTouchEvent:!0,params:{dragAmount:{x:0,y:0},wasDragged:!1,mouseDownPos:n.clone(),mouseDragPos:n.clone(),vertex:i}};r&&n&&n.distance(r)<.001?i.listeners.fireClickEvent(s):i.listeners.fireDragEndEvent(s)}h()},touchCancel:function(t){h()},multipointStart:function(t){a=e.draw.scale.clone()},multipointEnd:function(t){a=null},pinch:function(t){var i=new m.Vertex(t.touches.item(0).clientX,t.touches.item(0).clientY),s=new m.Vertex(t.touches.item(1).clientX,t.touches.item(1).clientY),r=new d.Line(i,s).vertAt(.5);e.setZoom(a.x*t.zoom,a.y*t.zoom,r),e.redraw()}})}catch(t){console.error("Failed to initialize AlloyFinger!"),console.error(t)}else globalThis.Touchy&&"function"==typeof globalThis.Touchy?console.error("[Deprecation] Found Touchy which is not supported any more. Please use AlloyFinger instead."):console.warn("Cannot initialize the touch handler. AlloyFinger is missig. Did you include it?")}else e.console.log("Touch interaction disabled.");this.config.enableKeys?this.keyHandler=new u.KeyHandler({trackAll:!0}).down("escape",(function(){e.clearSelection(!0)})).down("shift",(function(){e.selectPolygon=new y.Polygon,e.redraw()})).up("shift",(function(){null!=e.selectPolygon&&(e.selectVerticesInPolygon(e.selectPolygon),e.selectPolygon=null,e.redraw())})):e.console.log("Keyboard interaction disabled.")},t.prototype.createGUI=function(){if(globalThis.utils&&"function"==typeof globalThis.utils.createGUI)return globalThis.utils.createGUI(this);throw"Cannot create dat.GUI instance; did you load the ./utils/creategui helper function an the dat.GUI library?"},t.DEFAULT_CANVAS_WIDTH=1024,t.DEFAULT_CANVAS_HEIGHT=768,t.DEFAULT_CLICK_TOLERANCE=8,t.DEFAULT_TOUCH_TOLERANCE=32,t.Draggable=((e=function(){function e(t,e){this.item=t,this.typeName=e}return e.prototype.isVertex=function(){return this.typeName==t.Draggable.VERTEX},e.prototype.setVIndex=function(t){return this.vindex=t,this},e}()).VERTEX="vertex",e),t.utils={safeMergeByKeys:function(t,e){for(var i in e)if(e.hasOwnProperty(i))if(t.hasOwnProperty(i)){var s=typeof t[i];try{"boolean"==s?t[i]=!!JSON.parse(e[i]):"number"==s?t[i]=1*JSON.parse(e[i]):("function"==s&&e[i],t[i]=e[i])}catch(t){console.error("error in key ",i,e[i],t)}}else t[i]=e[i];return t},setCSSscale:function(t,e,i){t.style["transform-origin"]="0 0",t.style.transform=1==e&&1==i?null:"scale("+e+","+i+")"},fetch:{val:function(t,e,i){return t.hasOwnProperty(e)?void 0===t[e]?i:t[e]:i},num:function(t,e,i){if(!t.hasOwnProperty(e))return i;if("number"==typeof t[e])return t[e];try{return 1*JSON.parse(t[e])}catch(t){return i}},bool:function(t,e,i){if(!t.hasOwnProperty(e))return i;if("boolean"==typeof t[e])return t[e];try{return!!JSON.parse(t[e])}catch(t){return i}},func:function(t,e,i){return t.hasOwnProperty(e)?"function"!=typeof t[e]?i:t[e]:i}},enableBezierPathAutoAdjust:function(t){for(var e=0;e<t.bezierCurves.length;e++)t.bezierCurves[e].startPoint.listeners.addDragListener((function(e){var i=t.locateCurveByStartPoint(e.params.vertex);t.bezierCurves[i].startPoint.addXY(-e.params.dragAmount.x,-e.params.dragAmount.y),t.moveCurvePoint(1*i,t.START_POINT,e.params.dragAmount),t.updateArcLengths()})),t.bezierCurves[e].startControlPoint.listeners.addDragListener((function(e){var i=t.locateCurveByStartControlPoint(e.params.vertex);t.bezierCurves[i].startPoint.attr.bezierAutoAdjust&&(t.adjustPredecessorControlPoint(1*i,!0,!1),t.updateArcLengths())})),t.bezierCurves[e].endControlPoint.listeners.addDragListener((function(e){var i=t.locateCurveByEndControlPoint(e.params.vertex);t.bezierCurves[i%t.bezierCurves.length].endPoint.attr.bezierAutoAdjust&&(t.adjustSuccessorControlPoint(1*i,!0,!1),t.updateArcLengths())})),e+1==t.bezierCurves.length&&t.bezierCurves[t.bezierCurves.length-1].endPoint.listeners.addDragListener((function(e){if(!t.adjustCircular){var i=t.locateCurveByEndPoint(e.params.vertex);t.moveCurvePoint(1*i,t.END_CONTROL_POINT,new m.Vertex({x:e.params.dragAmount.x,y:e.params.dragAmount.y}))}t.updateArcLengths()}))}},t}();e.H=C},180:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var s=i(432),r=i(710),n=i(919),o=i(909),a=function(){function t(t,e){this.className="Polygon",this.uid=n.UIDGenerator.next(),void 0===t&&(t=[]),this.vertices=t,this.isOpen=e}return t.prototype.addVertex=function(t){this.vertices.push(t)},t.prototype.getVertexAt=function(t){return t<0?this.vertices[this.vertices.length-Math.abs(t)%this.vertices.length]:this.vertices[t%this.vertices.length]},t.prototype.move=function(t){for(var e in this.vertices)this.vertices[e].add(t);return this},t.prototype.containsVert=function(t){for(var e=!1,i=0,s=this.vertices.length-1;i<this.vertices.length;s=i++){var r=this.vertices[i].x,n=this.vertices[i].y,o=this.vertices[s].x,a=this.vertices[s].y;n>t.y!=a>t.y&&t.x<(o-r)*(t.y-n)/(a-n)+r&&(e=!e)}return e},t.prototype.scale=function(t,e){for(var i in this.vertices)"function"==typeof this.vertices[i].scale?this.vertices[i].scale(t,e):console.log("There seems to be a null vertex!",this.vertices[i]);return this},t.prototype.rotate=function(t,e){for(var i in this.vertices)this.vertices[i].rotate(t,e);return this},t.prototype.getBounds=function(){return r.Bounds.computeFromVertices(this.vertices)},t.prototype.toQuadraticBezierData=function(){if(this.vertices.length<3)return[];var t=[],e=this.vertices[0],i=this.vertices[1],s=new o.Vertex(e.x+(i.x-e.x)/2,e.y+(i.y-e.y)/2);t.push(s);for(var r=this.isOpen?this.vertices.length:this.vertices.length+1,n=1;n<r;n++)e=this.vertices[n%this.vertices.length],i=this.vertices[(n+1)%this.vertices.length],s=new o.Vertex(e.x+(i.x-e.x)/2,e.y+(i.y-e.y)/2),t.push(e),t.push(s),e=i;return t},t.prototype.toQuadraticBezierSVGString=function(){var t=this.toQuadraticBezierData();if(0==t.length)return"";for(var e=["M "+t[0].x+" "+t[0].y],i=1;i<t.length;i+=2)e.push("Q "+t[i].x+" "+t[i].y+", "+t[i+1].x+" "+t[i+1].y);return e.join(" ")},t.prototype.toCubicBezierData=function(t){if(void 0===t&&(t=1),this.vertices.length<3)return[];var e=[],i=this.vertices[0],s=this.vertices[1],r=new o.Vertex(i.x+(s.x-i.x)/2,i.y+(s.y-i.y)/2);e.push(r);for(var n=this.isOpen?this.vertices.length-1:this.vertices.length,a=0;a<n;a++){i=this.vertices[a%this.vertices.length],s=this.vertices[(a+1)%this.vertices.length];var h=this.vertices[(a+2)%this.vertices.length],l=new o.Vertex(i.x+(s.x-i.x)/2,i.y+(s.y-i.y)/2),c=new o.Vertex(s.x+(h.x-s.x)/2,s.y+(h.y-s.y)/2),u=new o.Vertex(l.x+(s.x-l.x)*t,l.y+(s.y-l.y)*t),d=new o.Vertex(c.x+(s.x-c.x)*t,c.y+(s.y-c.y)*t);e.push(u),e.push(d),e.push(c)}return e},t.prototype.toCubicBezierSVGString=function(t){var e=this.toCubicBezierData(t);if(0==e.length)return"";for(var i=["M "+e[0].x+" "+e[0].y],s=1;s<e.length;s+=3)i.push("C "+e[s].x+" "+e[s].y+", "+e[s+1].x+" "+e[s+1].y+", "+e[s+2].x+" "+e[s+2].y);return i.join(" ")},t.prototype.toCubicBezierPath=function(t){for(var e=this.toCubicBezierData(t),i=[],r=0;r+3<e.length;r+=3)i.push([e[r],e[r+3],e[r+1],e[r+2]]);return s.BezierPath.fromArray(i)},t.prototype.toSVGString=function(t){t=t||{};var e=[];if(e.push("<path"),t.className&&e.push(' class="'+t.className+'"'),e.push(' d="'),this.vertices.length>0){e.push("M "),e.push(this.vertices[0].x.toString()),e.push(" "),e.push(this.vertices[0].y.toString());for(var i=1;i<this.vertices.length;i++)e.push(" L "),e.push(this.vertices[i].x.toString()),e.push(" "),e.push(this.vertices[i].y.toString());this.isOpen||e.push(" Z")}return e.push('" />'),e.join("")},t}();e.Polygon=a},128:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGBuilder=void 0;var i=function(){function t(){}return t.prototype.build=function(t,e){var i=[];for(var s in i.push('<?xml version="1.0" encoding="UTF-8"?>\n'),i.push('<svg width="'+e.canvasSize.width+'" height="'+e.canvasSize.height+'"'),i.push(' viewBox="'),i.push("0"),i.push(" "),i.push("0"),i.push(" "),i.push(e.canvasSize.width.toString()),i.push(" "),i.push(e.canvasSize.height.toString()),i.push('"'),i.push(' xmlns="http://www.w3.org/2000/svg">\n'),i.push("  <defs>\n"),i.push("  <style>\n"),i.push("     .Vertex { fill : blue; stroke : none; } \n"),i.push("     .Triangle { fill : none; stroke : turquoise; stroke-width : 1px; } \n"),i.push("     .Polygon { fill : none; stroke : green; stroke-width : 2px; } \n"),i.push("     .BezierPath { fill : none; stroke : blue; stroke-width : 2px; } \n"),i.push("     .VEllipse { fill : none; stroke : black; stroke-width : 1px; } \n"),i.push("     .Line { fill : none; stroke : purple; stroke-width : 1px; } \n"),i.push("     .Circle { fill : none; stroke : purple; stroke-width : 1px; } \n"),i.push("     .CircleSector { fill : none; stroke : purple; stroke-width : 1px; } \n"),i.push("  </style>\n"),i.push("  </defs>\n"),i.push('  <g class="main-g"'),(e.zoom||e.offset)&&(i.push(' transform="'),e.zoom&&i.push("scale("+e.zoom.x+","+e.zoom.y+")"),e.offset&&i.push(" translate("+e.offset.x+","+e.offset.y+")"),i.push('"')),i.push(">\n"),t){var r=t[s];"function"==typeof r.toSVGString?(i.push("    "),i.push(r.toSVGString({className:r.className})),i.push("\n")):console.warn("Unrecognized drawable type has no toSVGString()-function. Ignoring: "+r.className)}return i.push("  </g>\n"),i.push("</svg>\n"),i.join("")},t}();e.SVGBuilder=i},591:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Triangle=void 0;var s=i(710),r=i(991),n=i(198),o=i(180),a=i(919),h=i(909),l=i(369),c=function(){function t(t,e,i){this.className="Triangle",this.uid=a.UIDGenerator.next(),this.a=t,this.b=e,this.c=i,this.calcCircumcircle()}return t.fromArray=function(e){if(e.length<3)throw"Cannot create triangle from array with less than three vertices ("+e.length+")";return new t(e[0],e[1],e[2])},t.prototype.getArea=function(){return Math.abs(t.utils.signedArea(this.a.x,this.a.y,this.b.x,this.b.y,this.c.x,this.c.y))},t.prototype.getCentroid=function(){return new h.Vertex((this.a.x+this.b.x+this.c.x)/3,(this.a.y+this.b.y+this.c.y)/3)},t.prototype.scaleToCentroid=function(t){var e=this.getCentroid();return this.a.scale(t,e),this.b.scale(t,e),this.c.scale(t,e),this},t.prototype.getCircumcircle=function(){return this.center&&this.radius||this.calcCircumcircle(),new r.Circle(this.center.clone(),this.radius)},t.prototype.isAdjacent=function(t){var e=this.a.equals(t.a)||this.a.equals(t.b)||this.a.equals(t.c),i=this.b.equals(t.a)||this.b.equals(t.b)||this.b.equals(t.c),s=this.c.equals(t.a)||this.c.equals(t.b)||this.c.equals(t.c);return e&&i||e&&s||i&&s},t.prototype.getThirdVertex=function(t,e){return this.a.equals(t)&&this.b.equals(e)||this.a.equals(e)&&this.b.equals(t)?this.c:this.b.equals(t)&&this.c.equals(e)||this.b.equals(e)&&this.c.equals(t)?this.a:this.b},t.prototype.calcCircumcircle=function(){var e,i,s=this.b.x-this.a.x,r=this.b.y-this.a.y,n=this.c.x-this.a.x,o=this.c.y-this.a.y,a=s*(this.a.x+this.b.x)+r*(this.a.y+this.b.y),l=n*(this.a.x+this.c.x)+o*(this.a.y+this.c.y),c=2*(s*(this.c.y-this.b.y)-r*(this.c.x-this.b.x));if(Math.abs(c)<t.EPSILON){var u=this.bounds();this.center=new h.Vertex((u.min.x+u.max.x)/2,(u.min.y+u.max.y)/2),e=this.center.x-u.min.x,i=this.center.y-u.min.y}else{var d=(o*a-r*l)/c,f=(s*l-n*a)/c;this.center=new h.Vertex(d,f),e=this.center.x-this.a.x,i=this.center.y-this.a.y}this.radius_squared=e*e+i*i,this.radius=Math.sqrt(this.radius_squared)},t.prototype.inCircumcircle=function(t){var e=this.center.x-t.x,i=this.center.y-t.y;return e*e+i*i<=this.radius_squared},t.prototype.bounds=function(){return new s.Bounds(new h.Vertex(t.utils.min3(this.a.x,this.b.x,this.c.x),t.utils.min3(this.a.y,this.b.y,this.c.y)),new h.Vertex(t.utils.max3(this.a.x,this.b.x,this.c.x),t.utils.max3(this.a.y,this.b.y,this.c.y)))},t.prototype.toPolygon=function(){return new o.Polygon([this.a,this.b,this.c])},t.prototype.determinant=function(){return(this.b.y-this.a.y)*(this.c.x-this.b.x)-(this.c.y-this.b.y)*(this.b.x-this.a.x)},t.prototype.containsPoint=function(e){return t.utils.pointIsInTriangle(e.x,e.y,this.a.x,this.a.y,this.b.x,this.b.y,this.c.x,this.c.y)},t.prototype.getIncircularTriangle=function(){var e=new n.Line(this.a,this.b),i=new n.Line(this.b,this.c),s=new n.Line(this.c,this.a),r=l.geomutils.nsectAngle(this.b,this.a,this.c,2)[0],o=l.geomutils.nsectAngle(this.c,this.b,this.a,2)[0],a=r.intersection(o);return new t(e.getClosestPoint(a),i.getClosestPoint(a),s.getClosestPoint(a))},t.prototype.getIncircle=function(){return this.getIncircularTriangle().getCircumcircle()},t.prototype.getIncenter=function(){return this.center&&this.radius||this.calcCircumcircle(),this.center.clone()},t.prototype.toString=function(){return"{ a : "+this.a.toString()+", b : "+this.b.toString()+", c : "+this.c.toString()+"}"},t.prototype.toSVGString=function(t){t=t||{};var e=[];e.push("<path"),t.className&&e.push(' class="'+t.className+'"'),e.push(' d="');var i=[this.a,this.b,this.c];if(i.length>0){e.push("M "),e.push(i[0].x),e.push(" "),e.push(i[0].y);for(var s=1;s<i.length;s++)e.push(" L "),e.push(i[s].x),e.push(" "),e.push(i[s].y);e.push(" Z")}return e.push('" />'),e.join("")},t.EPSILON=1e-6,t.utils={max3:function(t,e,i){return t>=e&&t>=i?t:e>=t&&e>=i?e:i},min3:function(t,e,i){return t<=e&&t<=i?t:e<=t&&e<=i?e:i},signedArea:function(t,e,i,s,r,n){return.5*(-s*r+e*(-i+r)+t*(s-n)+i*n)},pointIsInTriangle:function(e,i,s,r,n,o,a,h){var l=t.utils.signedArea(s,r,n,o,a,h),c=1/(2*l)*(r*a-s*h+(h-r)*e+(s-a)*i),u=1/(2*l)*(s*o-r*n+(r-o)*e+(n-s)*i);return c>0&&u>0&&1-c-u>0}},t}();e.Triangle=c},919:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UIDGenerator=void 0;var i=function(){function t(){}return t.next=function(){return""+t.current++},t.current=0,t}();e.UIDGenerator=i},185:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VEllipse=void 0;var s=i(919),r=function(){function t(t,e){this.className="VEllipse",this.uid=s.UIDGenerator.next(),this.center=t,this.axis=e}return t.prototype.toSVGString=function(t){t=t||{};var e=[];return e.push("<ellipse"),t.className&&e.push(' class="'+t.className+'"'),e.push(' cx="'+this.center.x+'"'),e.push(' cy="'+this.center.y+'"'),e.push(' rx="'+this.axis.x+'"'),e.push(' ry="'+this.axis.y+'"'),e.push(" />"),e.join("")},t}();e.VEllipse=r},609:function(t,e,i){var s,r=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var n=i(7),o=i(909),a=function(t){function e(i,s){var r=t.call(this,i,s,(function(t,i){return new e(t,i)}))||this;return r.className="Vector",r}return r(e,t),e.prototype.perp=function(){var t=this.clone();return t.sub(this.a),(t=new e(new o.Vertex,new o.Vertex(-t.b.y,t.b.x))).a.add(this.a),t.b.add(this.a),t},e.prototype.inverse=function(){var t=this.a;return this.a=this.b,this.b=t,this},e.prototype.inv=function(){return this.b.x=this.a.x-(this.b.x-this.a.x),this.b.y=this.a.y-(this.b.y-this.a.y),this},e.prototype.intersection=function(t){var e=this.denominator(t);if(0==e)return null;var i=this.a.y-t.a.y,s=this.a.x-t.a.x,r=(t.b.x-t.a.x)*i-(t.b.y-t.a.y)*s,n=(this.b.x-this.a.x)*i-(this.b.y-this.a.y)*s;return i=r/e,s=n/e,new o.Vertex(this.a.x+i*(this.b.x-this.a.x),this.a.y+i*(this.b.y-this.a.y))},e.prototype.toSVGString=function(t){t=t||{};var i=[],s=e.utils.buildArrowHead(this.a,this.b,8,1,1);i.push("<g"),t.className&&i.push(' class="'+t.className+'"'),i.push(">"),i.push("   <line"),i.push(' x1="'+this.a.x+'"'),i.push(' y1="'+this.a.y+'"'),i.push(' x2="'+s[0].x+'"'),i.push(' y2="'+s[0].y+'"'),i.push(" />"),i.push('   <polygon points="');for(var r=0;r<s.length;r++)r>0&&i.push(" "),i.push(s[r].x+","+s[r].y);return i.push('"/>'),i.push("</g>"),i.join("")},e.utils={buildArrowHead:function(t,e,i,s,r){var n=Math.atan2((e.y-t.y)*r,(e.x-t.x)*s),a=[];return a.push(new o.Vertex(e.x*s-i*Math.cos(n),e.y*r-i*Math.sin(n))),a.push(new o.Vertex(e.x*s-1.35*i*Math.cos(n-Math.PI/8),e.y*r-1.35*i*Math.sin(n-Math.PI/8))),a.push(new o.Vertex(e.x*s,e.y*r)),a.push(new o.Vertex(e.x*s-1.35*i*Math.cos(n+Math.PI/8),e.y*r-1.35*i*Math.sin(n+Math.PI/8))),a}},e}(n.VertTuple);e.Vector=a},7:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertTuple=void 0;var s=i(909),r=i(919),n=function(){function t(t,e,i){this.uid=r.UIDGenerator.next(),this.a=t,this.b=e,this.factory=i}return t.prototype.length=function(){return Math.sqrt(Math.pow(this.b.x-this.a.x,2)+Math.pow(this.b.y-this.a.y,2))},t.prototype.setLength=function(t){return this.scale(t/this.length())},t.prototype.sub=function(t){return this.a.sub(t),this.b.sub(t),this},t.prototype.add=function(t){return this.a.add(t),this.b.add(t),this},t.prototype.normalize=function(){return this.b.set(this.a.x+(this.b.x-this.a.x)/this.length(),this.a.y+(this.b.y-this.a.y)/this.length()),this},t.prototype.scale=function(t){return this.b.set(this.a.x+(this.b.x-this.a.x)*t,this.a.y+(this.b.y-this.a.y)*t),this},t.prototype.moveTo=function(t){var e=this.a.difference(t);return this.a.add(e),this.b.add(e),this},t.prototype.angle=function(t){null!=t&&void 0!==t||(t=this.factory(new s.Vertex(0,0),new s.Vertex(100,0)));var e=this.b.clone().sub(this.a),i=t.b.clone().sub(t.a);return Math.atan2(i.x,i.y)-Math.atan2(e.x,e.y)},t.prototype.vertAt=function(t){return new s.Vertex(this.a.x+(this.b.x-this.a.x)*t,this.a.y+(this.b.y-this.a.y)*t)},t.prototype.denominator=function(t){return(t.b.y-t.a.y)*(this.b.x-this.a.x)-(t.b.x-t.a.x)*(this.b.y-this.a.y)},t.prototype.colinear=function(t){return Math.abs(this.denominator(t))<s.Vertex.EPSILON},t.prototype.getClosestT=function(e){var i=t.vtutils.dist2(this.a,this.b);return 0===i?0:((e.x-this.a.x)*(this.b.x-this.a.x)+(e.y-this.a.y)*(this.b.y-this.a.y))/i},t.prototype.hasPoint=function(e,i){var r=this.getClosestT(e);return void 0!==i&&i?Math.sqrt(t.vtutils.dist2(e,this.vertAt(r)))<s.Vertex.EPSILON&&r>=0&&r<=1:r>=0&&r<=1},t.prototype.getClosestPoint=function(t){var e=this.getClosestT(t);return this.vertAt(e)},t.prototype.pointDistance=function(e){return Math.sqrt(t.vtutils.dist2(e,this.vertAt(this.getClosestT(e))))},t.prototype.clone=function(){return this.factory(this.a.clone(),this.b.clone())},t.prototype.toString=function(){return"{ a : "+this.a.toString()+", b : "+this.b.toString()+" }"},t.vtutils={dist2:function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)}},t}();e.VertTuple=n},909:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vertex=void 0;var s=i(954),r=i(919),n=i(779),o=function(){function t(t,e){if(this.className="Vertex",this.uid=r.UIDGenerator.next(),void 0===t)this.x=0,this.y=0;else if("number"==typeof t&&"number"==typeof e)this.x=t,this.y=e;else{var i=t;"number"==typeof i.x&&"number"==typeof i.y?(this.x=i.x,this.y=i.y):(this.x="number"==typeof t?t:void 0===t?0:NaN,this.y="number"==typeof e?e:void 0===e?0:NaN)}this.attr=new s.VertexAttr,this.listeners=new n.VertexListeners(this)}return t.prototype.set=function(t,e){if("number"==typeof t&&"number"==typeof e)this.x=t,this.y=e;else{var i=t;"number"==typeof i.x&&"number"==typeof i.y?(this.x=i.x,this.y=i.y):(this.x="number"==typeof t?t:void 0===t?0:NaN,this.y="number"==typeof e?e:void 0===e?0:NaN)}return this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.setY=function(t){return this.y=t,this},t.prototype.invX=function(){return this.x=-this.x,this},t.prototype.invY=function(){return this.y=-this.y,this},t.prototype.add=function(t,e){if("number"==typeof t&&"number"==typeof e)this.x+=t,this.y+=e;else{var i=t;if("number"==typeof i.x&&"number"==typeof i.y)this.x+=i.x,this.y+=i.y;else{if("number"!=typeof t)throw"Cannot add "+typeof t+" to numeric x component!";if(this.x+=t,"number"!=typeof e)throw"Cannot add "+typeof e+" to numeric y component!";this.y+=e}}return this},t.prototype.addXY=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.addX=function(t){return this.x+=t,this},t.prototype.addY=function(t){return this.y+=t,this},t.prototype.sub=function(t,e){if("number"==typeof t&&"number"==typeof e)this.x-=t,this.y-=e;else{var i=t;if("number"==typeof i.x&&"number"==typeof i.y)this.x-=i.x,this.y-=i.y;else{if("number"!=typeof t)throw"Cannot add "+typeof t+" to numeric x component!";if(this.x-=t,"number"!=typeof e)throw"Cannot add "+typeof e+" to numeric y component!";this.y-=e}}return this},t.prototype.equals=function(e){var i=Math.abs(this.x-e.x)<t.EPSILON,s=Math.abs(this.y-e.y)<t.EPSILON;return i&&s},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.distance=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},t.prototype.difference=function(e){return new t(e.x-this.x,e.y-this.y)},t.prototype.scale=function(e,i){return i&&void 0!==i||(i=new t(0,0)),this.x=i.x+(this.x-i.x)*e,this.y=i.y+(this.y-i.y)*e,this},t.prototype.rotate=function(e,i){i&&void 0!==i||(i=new t(0,0)),this.sub(i),e+=Math.atan2(this.y,this.x);var s=this.distance(t.ZERO);return this.x,this.y,this.x=s*Math.cos(e),this.y=s*Math.sin(e),this.add(i),this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.inv=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.prototype.toSVGString=function(t){t=t||{};var e=[];return e.push("<circle"),t.className&&e.push(' class="'+t.className+'"'),e.push(' cx="'+this.x+'"'),e.push(' cy="'+this.y+'"'),e.push(' r="2"'),e.push(" />"),e.join("")},t.randomVertex=function(e){return new t(e.min.x+Math.random()*(e.max.x-e.min.x),e.min.y+Math.random()*(e.max.y-e.min.y))},t.ZERO=new t(0,0),t.EPSILON=1e-6,t.utils={buildArrowHead:function(e,i,s,r,n){var o=Math.atan2((i.y-e.y)*n,(i.x-e.x)*r),a=[];return a.push(new t(i.x*r-s*Math.cos(o),i.y*n-s*Math.sin(o))),a.push(new t(i.x*r-1.35*s*Math.cos(o-Math.PI/8),i.y*n-1.35*s*Math.sin(o-Math.PI/8))),a.push(new t(i.x*r,i.y*n)),a.push(new t(i.x*r-1.35*s*Math.cos(o+Math.PI/8),i.y*n-1.35*s*Math.sin(o+Math.PI/8))),a}},t}();e.Vertex=o},954:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertexAttr=void 0;var i=function(){function t(){for(var e in this.draggable=!0,this.selectable=!0,this.isSelected=!1,this.visible=!0,t.model)this[e]=t.model[e]}return t.model={draggable:!0,selectable:!0,isSelected:!1,visible:!0},t}();e.VertexAttr=i},779:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertexListeners=void 0;var i=function(){function t(t){this.click=[],this.drag=[],this.dragStart=[],this.dragEnd=[],this.vertex=t}return t.prototype.addClickListener=function(e){return t._addListener(this.click,e),this},t.prototype.removeClickListener=function(e){return this.click=t._removeListener(this.click,e),this},t.prototype.addDragListener=function(e){return t._addListener(this.drag,e),this},t.prototype.removeDragListener=function(e){return this.drag=t._removeListener(this.drag,e),this},t.prototype.addDragStartListener=function(e){return t._addListener(this.dragStart,e),this},t.prototype.removeDragStartListener=function(e){return this.dragStart=t._removeListener(this.dragStart,e),this},t.prototype.addDragEndListener=function(e){return t._addListener(this.dragEnd,e),this},t.prototype.removeDragEndListener=function(e){return this.dragEnd=t._removeListener(this.dragEnd,e),this},t.prototype.fireClickEvent=function(e){t._fireEvent(this,this.click,e)},t.prototype.fireDragEvent=function(e){t._fireEvent(this,this.drag,e)},t.prototype.fireDragStartEvent=function(e){t._fireEvent(this,this.dragStart,e)},t.prototype.fireDragEndEvent=function(e){t._fireEvent(this,this.dragEnd,e)},t._fireEvent=function(t,e,i){var s=i;for(var r in void 0===s.params?s.params={vertex:t.vertex}:s.params.vertex=t.vertex,e)e[r](s)},t._addListener=function(t,e){for(var i in t)if(t[i]==e)return!1;return t.push(e),!0},t._removeListener=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return t.splice(i,1);return t},t}();e.VertexListeners=i},836:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.drawutils=void 0;var s=i(281),r=i(909),n=function(){function t(t,e){this.ctx=t,this.offset=new r.Vertex(0,0),this.scale=new r.Vertex(1,1),this.fillShapes=e}return t.prototype.beginDrawCycle=function(){},t.prototype.line=function(t,e,i,s){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y),this.ctx.strokeStyle=i,this.ctx.lineWidth=s||1,this.ctx.stroke(),this.ctx.restore()},t.prototype.arrow=function(t,e,i,s){this.ctx.save(),this.ctx.beginPath();var n=r.Vertex.utils.buildArrowHead(t,e,8,this.scale.x,this.scale.y);this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y);for(var o=0;o<n.length;o++)this.ctx.lineTo(this.offset.x+n[o].x,this.offset.y+n[o].y);this.ctx.lineTo(this.offset.x+n[0].x,this.offset.y+n[0].y),this.ctx.lineWidth=s||1,this._fillOrDraw(i),this.ctx.restore()},t.prototype.image=function(t,e,i){t.complete&&t.naturalWidth&&(this.ctx.save(),this.ctx.drawImage(t,0,0,t.naturalWidth-1,t.naturalHeight-1,this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y,i.x*this.scale.x,i.y*this.scale.y),this.ctx.restore())},t.prototype.rect=function(t,e,i,s,r){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+e)*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+e)*this.scale.x,this.offset.y+(t.y+i)*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+(t.y+i)*this.scale.y),this.ctx.closePath(),this.ctx.lineWidth=r||1,this._fillOrDraw(s),this.ctx.restore()},t.prototype._fillOrDraw=function(t){this.fillShapes?(this.ctx.fillStyle=t,this.ctx.fill()):(this.ctx.strokeStyle=t,this.ctx.stroke())},t.prototype.cubicBezier=function(t,e,i,r,n,o){t instanceof s.CubicBezierCurve?this.cubicBezier(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint,n,o):(this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.bezierCurveTo(this.offset.x+i.x*this.scale.x,this.offset.y+i.y*this.scale.y,this.offset.x+r.x*this.scale.x,this.offset.y+r.y*this.scale.y,this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y),this.ctx.lineWidth=o||2,this._fillOrDraw(n),this.ctx.restore())},t.prototype.quadraticBezier=function(t,e,i,s,r){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y),this.ctx.quadraticCurveTo(this.offset.x+e.x*this.scale.x,this.offset.y+e.y*this.scale.y,this.offset.x+i.x*this.scale.x,this.offset.y+i.y*this.scale.y),this.ctx.lineWidth=r||2,this._fillOrDraw(s),this.ctx.restore()},t.prototype.cubicBezierPath=function(t,e,i){if(t&&0!=t.length){var s,r,n;this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t[0].x*this.scale.x,this.offset.y+t[0].y*this.scale.y);for(var o=1;o<t.length;o+=3)r=t[o],n=t[o+1],s=t[o+2],this.ctx.bezierCurveTo(this.offset.x+r.x*this.scale.x,this.offset.y+r.y*this.scale.y,this.offset.x+n.x*this.scale.x,this.offset.y+n.y*this.scale.y,this.offset.x+s.x*this.scale.x,this.offset.y+s.y*this.scale.y);this.ctx.closePath(),this.ctx.lineWidth=i||1,this._fillOrDraw(e),this.ctx.restore()}},t.prototype.handle=function(t,e){this.point(t,"rgb(0,32,192)"),this.square(e,5,"rgba(0,128,192,0.5)")},t.prototype.handleLine=function(t,e){this.line(t,e,"rgb(192,192,192)")},t.prototype.dot=function(t,e){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(Math.round(this.offset.x+this.scale.x*t.x),Math.round(this.offset.y+this.scale.y*t.y)),this.ctx.lineTo(Math.round(this.offset.x+this.scale.x*t.x+1),Math.round(this.offset.y+this.scale.y*t.y+1)),this.ctx.closePath(),this.ctx.lineWidth=1,this._fillOrDraw(e),this.ctx.restore()},t.prototype.point=function(t,e){this.ctx.beginPath(),this.ctx.arc(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,3,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.lineWidth=1,this._fillOrDraw(e)},t.prototype.circle=function(t,e,i,s){this.ctx.beginPath(),this.ctx.ellipse(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e*this.scale.x,e*this.scale.y,0,0,2*Math.PI),this.ctx.closePath(),this.ctx.lineWidth=s||1,this._fillOrDraw(i)},t.prototype.circleArc=function(t,e,i,s,r,n,o){o&&o.asSegment||this.ctx.beginPath(),this.ctx.ellipse(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e*this.scale.x,e*this.scale.y,0,i,s,!1),o&&o.asSegment||(this.ctx.lineWidth=n||1,this._fillOrDraw(r||"#000000"))},t.prototype.ellipse=function(t,e,i,s,r){this.ctx.beginPath(),this.ctx.ellipse(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e*this.scale.x,i*this.scale.y,0,0,2*Math.PI),this.ctx.closePath(),this.ctx.lineWidth=r||1,this._fillOrDraw(s)},t.prototype.square=function(t,e,i,s){this.ctx.beginPath(),this.ctx.rect(this.offset.x+(t.x-e/2)*this.scale.x,this.offset.y+(t.y-e/2)*this.scale.y,e*this.scale.x,e*this.scale.y),this.ctx.closePath(),this.ctx.lineWidth=s||1,this._fillOrDraw(i)},t.prototype.grid=function(t,e,i,s,r,n){this.ctx.beginPath();for(var o=-Math.ceil(.5*i/r)*r,a=i/2,h=-Math.ceil(.5*e/s)*s;h<e/2;h+=s)this.ctx.moveTo(this.offset.x+(t.x+h)*this.scale.x,this.offset.y+(t.y+o)*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+h)*this.scale.x,this.offset.y+(t.y+a)*this.scale.y);for(var l=-Math.ceil(.5*e/s)*s,c=e/2,u=-Math.ceil(.5*i/r)*r;u<i/2;u+=r)this.ctx.moveTo(this.offset.x+(t.x+l)*this.scale.x-4,this.offset.y+(t.y+u)*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+c)*this.scale.x+4,this.offset.y+(t.y+u)*this.scale.y);this.ctx.strokeStyle=n,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.closePath()},t.prototype.raster=function(t,e,i,s,r,n){this.ctx.save(),this.ctx.beginPath();for(var o=-Math.ceil(.5*e/s)*s;o<e/2;o+=s){0;for(var a=-Math.ceil(.5*i/r)*r;a<i/2;a+=r)this.ctx.moveTo(this.offset.x+(t.x+o)*this.scale.x-4,this.offset.y+(t.y+a)*this.scale.y),this.ctx.lineTo(this.offset.x+(t.x+o)*this.scale.x+4,this.offset.y+(t.y+a)*this.scale.y),this.ctx.moveTo(this.offset.x+(t.x+o)*this.scale.x,this.offset.y+(t.y+a)*this.scale.y-4),this.ctx.lineTo(this.offset.x+(t.x+o)*this.scale.x,this.offset.y+(t.y+a)*this.scale.y+4)}this.ctx.strokeStyle=n,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},t.prototype.diamondHandle=function(t,e,i){this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x-e/2,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y-e/2),this.ctx.lineTo(this.offset.x+t.x*this.scale.x+e/2,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y+e/2),this.ctx.closePath(),this.ctx.lineWidth=1,this._fillOrDraw(i)},t.prototype.squareHandle=function(t,e,i){this.ctx.beginPath(),this.ctx.rect(this.offset.x+t.x*this.scale.x-e/2,this.offset.y+t.y*this.scale.y-e/2,e,e),this.ctx.closePath(),this.ctx.lineWidth=1,this._fillOrDraw(i)},t.prototype.circleHandle=function(t,e,i){e=e||3,this.ctx.beginPath(),this.ctx.arc(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y,e,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.lineWidth=1,this._fillOrDraw(i)},t.prototype.crosshair=function(t,e,i){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.offset.x+t.x*this.scale.x-e,this.offset.y+t.y*this.scale.y),this.ctx.lineTo(this.offset.x+t.x*this.scale.x+e,this.offset.y+t.y*this.scale.y),this.ctx.moveTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y-e),this.ctx.lineTo(this.offset.x+t.x*this.scale.x,this.offset.y+t.y*this.scale.y+e),this.ctx.strokeStyle=i,this.ctx.lineWidth=.5,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},t.prototype.polygon=function(t,e,i){this.polyline(t.vertices,t.isOpen,e,i)},t.prototype.polyline=function(t,e,i,s){if(!(t.length<=1)){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=s||1,this.ctx.moveTo(this.offset.x+t[0].x*this.scale.x,this.offset.y+t[0].y*this.scale.y);for(var r=0;r<t.length;r++)this.ctx.lineTo(this.offset.x+t[r].x*this.scale.x,this.offset.y+t[r].y*this.scale.y);e||this.ctx.closePath(),this._fillOrDraw(i),this.ctx.closePath(),this.ctx.setLineDash([]),this.ctx.restore()}},t.prototype.text=function(t,e,i,s){s=s||{},this.ctx.save(),e=this.offset.x+e*this.scale.x,i=this.offset.y+i*this.scale.y;var r=s.color||"black";this.fillShapes?(this.ctx.fillStyle=r,this.ctx.fillText(t,e,i)):(this.ctx.strokeStyle=r,this.ctx.strokeText(t,e,i)),this.ctx.restore()},t.prototype.label=function(t,e,i,s,r){this.ctx.save(),this.ctx.translate(e,i),void 0!==s&&this.ctx.rotate(s),this.ctx.fillStyle=r||"black",this.fillShapes?this.ctx.fillText(t,0,0):this.ctx.strokeText(t,0,0),this.ctx.restore()},t.prototype.clear=function(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},t}();e.drawutils=n},121:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.drawutilsgl=void 0;var s=i(909),r=function(){function t(e,i){this.gl=e,this.offset=new s.Vertex(0,0),this.scale=new s.Vertex(1,1),this.fillShapes=i,this._zindex=0,null!=e&&void 0!==e&&(this.glutils=new n(e),this._vertShader=this.glutils.compileShader(t.vertCode,this.gl.VERTEX_SHADER),this._fragShader=this.glutils.compileShader(t.fragCode,this.gl.FRAGMENT_SHADER),this._program=this.glutils.makeProgram(this._vertShader,this._fragShader),this.vertex_buffer=this.gl.createBuffer(),console.log("gl initialized"))}return t.prototype.beginDrawCycle=function(){this._zindex=0},t.prototype.copyInstance=function(e){var i=new t(null,e);return i.gl=this.gl,i.glutils=this.glutils,i._vertShader=this._vertShader,i._fragShader=this._fragShader,i._program=this._program,i},t.prototype._x2rel=function(t){return(this.scale.x*t+this.offset.x)/this.gl.canvas.width*2-1},t.prototype._y2rel=function(t){return(this.offset.y-this.scale.y*t)/this.gl.canvas.height*2-1},t.prototype.line=function(t,e,i){var s=new Float32Array(6);s[0]=this._x2rel(t.x),s[1]=this._y2rel(t.y),s[2]=this._zindex,s[3]=this._x2rel(e.x),s[4]=this._y2rel(e.y),s[5]=this._zindex,this._zindex+=.001,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.STATIC_DRAW);var r=this.gl.getAttribLocation(this._program,"position");this.gl.vertexAttribPointer(r,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(r),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);var n=this.gl.getUniformLocation(this._program,"uRotationVector");this.gl.uniform2fv(n,[0,1]),this.gl.lineWidth(5),this.gl.drawArrays(this.gl.LINES,0,s.length/3)},t.prototype.arrow=function(t,e,i){},t.prototype.image=function(t,e,i){},t.prototype._fillOrDraw=function(t){},t.prototype.cubicBezier=function(t,e,i,s,r,n){},t.prototype.cubicBezierPath=function(t,e,i){},t.prototype.handle=function(t,e){},t.prototype.handleLine=function(t,e){},t.prototype.dot=function(t,e){},t.prototype.point=function(t,e){},t.prototype.circle=function(t,e,i,s){},t.prototype.circleArc=function(t,e,i,s,r,n){},t.prototype.ellipse=function(t,e,i,s,r){},t.prototype.square=function(t,e,i,s){},t.prototype.grid=function(t,e,i,s,r,n){},t.prototype.raster=function(t,e,i,s,r,n){},t.prototype.diamondHandle=function(t,e,i){},t.prototype.squareHandle=function(t,e,i){},t.prototype.circleHandle=function(t,e,i){},t.prototype.crosshair=function(t,e,i){},t.prototype.polygon=function(t,e,i){for(var s=new Float32Array(3*t.vertices.length),r=0;r<t.vertices.length;r++)s[3*r+0]=this._x2rel(t.vertices[r].x),s[3*r+1]=this._y2rel(t.vertices[r].y),s[3*r+2]=this._zindex;this._zindex+=.001,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.STATIC_DRAW);var n=this.gl.getAttribLocation(this._program,"position");this.gl.vertexAttribPointer(n,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(n),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);var o=this.gl.getUniformLocation(this._program,"uRotationVector");this.gl.uniform2fv(o,[0,1]),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,s.length/3)},t.prototype.polyline=function(t,e,i,s){},t.prototype.text=function(t,e,i,s){},t.prototype.label=function(t,e,i,s){},t.prototype.clear=function(t){this.gl.clearColor(1,1,1,1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},t.vertCode="\n    precision mediump float;\n\n    attribute vec3 position;\n\n    uniform vec2 uRotationVector;\n\n    void main(void) {\n\tvec2 rotatedPosition = vec2(\n\t    position.x * uRotationVector.y +\n\t\tposition.y * uRotationVector.x,\n\t    position.y * uRotationVector.y -\n\t\tposition.x * uRotationVector.x\n\t);\n\n\tgl_Position = vec4(rotatedPosition, position.z, 1.0);\n    }",t.fragCode="\n    precision highp float;\n\n    void main(void) {\n\tgl_FragColor = vec4(0.0,0.75,1.0,1.0);\n    }",t}();e.drawutilsgl=r;var n=function(){function t(t){this.gl=t}return t.prototype.bufferData=function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e},t.prototype.compileShader=function(t,e){var i=this.gl.createShader(e);return this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.warn("Error in shader:"+this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i),null)},t.prototype.makeProgram=function(t,e){var i=this.gl.createProgram();return this.gl.attachShader(i,t),this.gl.attachShader(i,e),this.gl.linkProgram(i),this.gl.useProgram(i),this.gl.detachShader(i,t),this.gl.detachShader(i,e),this.gl.deleteShader(t),this.gl.deleteShader(e),i},t}()},369:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.geomutils=void 0;var s=i(198),r=i(591);e.geomutils={nsectAngle:function(t,e,i,n){var o=new r.Triangle(t,e,i),a=new s.Line(t,e),h=new s.Line(t,i),l=(a.angle(),h.angle(),a.angle(h)),c=o.determinant()>0;l<0&&(l=2*Math.PI+l),c||(l=-1*(2*Math.PI-l));for(var u=Math.max(a.length(),h.length())/a.length(),d=[],f=1;f<n;f++)d.push(new s.Line(t,e.clone().rotate(l/n*-f,t)).scale(u));return d}}},923:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.drawutilssvg=void 0;var s=i(210),r=i(281),n=i(909),o=function(){function t(t,e,i,s,r){this.svgNode=t,this.offset=new n.Vertex(0,0).set(e),this.scale=new n.Vertex(1,1).set(i),this.fillShapes=r,this.setSize(s),this.addStyleDefs()}return t.prototype.addStyleDefs=function(){var t=this.createNode("def"),e=this.createNode("style");t.appendChild(e),this.svgNode.appendChild(t)},t.prototype.setSize=function(t){this.canvasSize=t,this.svgNode.setAttribute("viewBox","0 0 "+this.canvasSize.width+" "+this.canvasSize.height),this.svgNode.setAttribute("width",""+this.canvasSize.width),this.svgNode.setAttribute("height",""+this.canvasSize.height)},t.prototype.createNode=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},t.prototype._bindFillDraw=function(t,e,i,s){return t.setAttribute("class",e),t.setAttribute("fill",this.fillShapes?i:"none"),t.setAttribute("stroke",this.fillShapes?"none":i),t.setAttribute("stroke-width",""+(s||1)),this.svgNode.appendChild(t),t},t.prototype.copyInstance=function(e){return new t(this.svgNode,this.offset,this.scale,this.canvasSize,this.fillShapes)},t.prototype.beginDrawCycle=function(){},t.prototype._x=function(t){return this.offset.x+this.scale.x*t},t.prototype._y=function(t){return this.offset.y+this.scale.y*t},t.prototype.line=function(t,e,i,s){var r=this.createNode("line");return r.setAttribute("x1",""+this._x(t.x)),r.setAttribute("y1",""+this._y(t.y)),r.setAttribute("x2",""+this._x(e.x)),r.setAttribute("y2",""+this._y(e.y)),this._bindFillDraw(r,"line",i,s||1)},t.prototype.arrow=function(t,e,i,s){for(var r=this.createNode("path"),o=n.Vertex.utils.buildArrowHead(t,e,8,this.scale.x,this.scale.y),a=["M",this._x(t.x),this._y(t.y)],h=0;h<=o.length;h++)a.push("L"),a.push(this.offset.x+o[h%o.length].x),a.push(this.offset.y+o[h%o.length].y);return r.setAttribute("d",a.join(" ")),this._bindFillDraw(r,"arrow",i,s||1)},t.prototype.image=function(t,e,i){var s=this,r=this.createNode("image"),n=function(t){if(t.naturalWidth){var n=i.x/t.naturalWidth,o=i.y/t.naturalHeight;r.setAttribute("width",""+t.naturalWidth*s.scale.x),r.setAttribute("height",""+t.naturalHeight*s.scale.y),r.setAttribute("transform","translate("+s._x(e.x)+" "+s._y(e.y)+") scale("+n+" "+o+")")}};return t.addEventListener("load",(function(e){n(t)})),r.setAttribute("x","0"),r.setAttribute("y","0"),n(t),r.setAttribute("href",t.src),this._bindFillDraw(r,"image",null,null)},t.prototype.cubicBezier=function(t,e,i,s,n,o){if(t instanceof r.CubicBezierCurve)return this.cubicBezier(t.startPoint,t.endPoint,t.startControlPoint,t.endControlPoint,n,o);var a=this.createNode("path"),h=["M",this._x(t.x),this._y(t.y),"C",this._x(i.x),this._y(i.y),this._x(s.x),this._y(s.y),this._x(e.x),this._y(e.y)];return a.setAttribute("d",h.join(" ")),this._bindFillDraw(a,"cubierBezier",n,o)},t.prototype.cubicBezierPath=function(t,e,i){var s=this.createNode("path");if(!t||0==t.length)return s;for(var r,n,o,a=["M",this._x(t[0].x),this._y(t[0].y)],h=1;h<t.length;h+=3)n=t[h],o=t[h+1],r=t[h+2],a.push("C",this._x(n.x),this._y(n.y),this._x(o.x),this._y(o.y),this._x(r.x),this._y(r.y));return s.setAttribute("d",a.join(" ")),this._bindFillDraw(s,"cubicBezierPath",e,i||1)},t.prototype.handle=function(t,e){this.point(t,"rgb(0,32,192)"),this.square(e,5,"rgba(0,128,192,0.5)")},t.prototype.handleLine=function(t,e){this.line(t,e,"rgb(192,192,192)")},t.prototype.dot=function(t,e){var i=this.createNode("line");return this._x(t.x),this._y(t.y),this._x(t.x+1),this._y(t.y+1),this._bindFillDraw(i,"dot",e,1)},t.prototype.point=function(t,e){var i=this.createNode("circle");return i.setAttribute("cx",""+this._x(t.x)),i.setAttribute("cy",""+this._y(t.y)),i.setAttribute("r","3"),this._bindFillDraw(i,"point",e,1)},t.prototype.circle=function(t,e,i,s){var r=this.createNode("circle");return r.setAttribute("cx",""+this._x(t.x)),r.setAttribute("cy",""+this._y(t.y)),r.setAttribute("r",""+e*this.scale.x),this._bindFillDraw(r,"circle",i,s||1)},t.prototype.circleArc=function(t,e,i,r,n,o){var a=this.createNode("path"),h=s.CircleSector.circleSectorUtils.describeSVGArc(this._x(t.x),this._y(t.y),e*this.scale.x,i,r);return a.setAttribute("d",h.join(" ")),this._bindFillDraw(a,"circleArc",n,o||1)},t.prototype.ellipse=function(t,e,i,s,r){var n=this.createNode("ellipse");return n.setAttribute("cx",""+this._x(t.x)),n.setAttribute("cy",""+this._y(t.y)),n.setAttribute("rx",""+e*this.scale.x),n.setAttribute("ry",""+i*this.scale.y),this._bindFillDraw(n,"ellipse",s,r||1)},t.prototype.square=function(t,e,i,s){var r=this.createNode("rectangle");return r.setAttribute("x",""+this._x(t.x-e/2)),r.setAttribute("y",""+this._y(t.y-e/2)),r.setAttribute("width",""+e*this.scale.x),r.setAttribute("height",""+e*this.scale.y),this._bindFillDraw(r,"square",i,s||1)},t.prototype.grid=function(t,e,i,s,r,n){for(var o=this.createNode("path"),a=[],h=-Math.ceil(.5*i/r)*r,l=i/2,c=-Math.ceil(.5*e/s)*s;c<e/2;c+=s)a.push("M",this._x(t.x+c),this._y(t.y+h)),a.push("L",this._x(t.x+c),this._y(t.y+l));for(var u=-Math.ceil(.5*e/s)*s,d=e/2,f=-Math.ceil(.5*i/r)*r;f<i/2;f+=r)a.push("M",this._x(t.x+u),this._y(t.y+f)),a.push("L",this._x(t.x+d),this._y(t.y+f));return o.setAttribute("d",a.join(" ")),this._bindFillDraw(o,"grid",n,1)},t.prototype.raster=function(t,e,i,s,r,n){for(var o=this.createNode("path"),a=[],h=-Math.ceil(.5*e/s)*s;h<e/2;h+=s){0;for(var l=-Math.ceil(.5*i/r)*r;l<i/2;l+=r)a.push("M",this._x(t.x+h)-4,this._y(t.y+l)),a.push("L",this._x(t.x+h)+4,this._y(t.y+l)),a.push("M",this._x(t.x+h),this._y(t.y+l)-4),a.push("L",this._x(t.x+h),this._y(t.y+l)+4)}return o.setAttribute("d",a.join(" ")),this._bindFillDraw(o,"raster",n,1)},t.prototype.diamondHandle=function(t,e,i){var s=this.createNode("path"),r=["M",this._x(t.x)-e/2,this._y(t.y),"L",this._x(t.x),this._y(t.y)-e/2,"L",this._x(t.x)+e/2,this._y(t.y),"L",this._x(t.x),this._y(t.y)+e/2,"Z"];return s.setAttribute("d",r.join(" ")),this._bindFillDraw(s,"diamondHandle",i,1)},t.prototype.squareHandle=function(t,e,i){var s=this.createNode("rect");return s.setAttribute("x",""+(this._x(t.x)-e/2)),s.setAttribute("y",""+(this._y(t.y)-e/2)),s.setAttribute("width",""+e),s.setAttribute("height",""+e),this._bindFillDraw(s,"squareHandle",i,1)},t.prototype.circleHandle=function(t,e,i){e=e||3;var s=this.createNode("circle");return s.setAttribute("cx",""+this._x(t.x)),s.setAttribute("cy",""+this._y(t.y)),s.setAttribute("r",""+e),this._bindFillDraw(s,"circleHandle",i,1)},t.prototype.crosshair=function(t,e,i){var s=this.createNode("path"),r=["M",this._x(t.x)-e,this._y(t.y),"L",this._x(t.x)+e,this._y(t.y),"M",this._x(t.x),this._y(t.y)-e,"L",this._x(t.x),this._y(t.y)+e];return s.setAttribute("d",r.join(" ")),this._bindFillDraw(s,"crosshair",i,.5)},t.prototype.polygon=function(t,e,i){return this.polyline(t.vertices,t.isOpen,e,i)},t.prototype.polyline=function(t,e,i,s){var r=this.createNode("path");if(0==t.length)return r;for(var n=["M",this._x(t[0].x),this._y(t[0].y)],o=t.length,a=1;a<o;a++)n.push("L",this._x(t[a].x),this._y(t[a].y));return e||n.push("Z"),r.setAttribute("d",n.join(" ")),this._bindFillDraw(r,"polyline",i,s||1)},t.prototype.text=function(t,e,i,s){var r=(s=s||{}).color||"black",n=this.createNode("text");return n.setAttribute("x",""+this._x(e)),n.setAttribute("y",""+this._x(i)),n.innerHTML=t,this._bindFillDraw(n,"text",r,1)},t.prototype.label=function(t,e,i,s){var r=this.createNode("text");return r.setAttribute("transform","translate("+this.offset.x+","+this.offset.y+"), rotate("+s/Math.PI*180+")"),r.innerHTML=t,this._bindFillDraw(r,"label","black",null)},t.prototype.clear=function(t){for(;this.svgNode.firstChild;)this.svgNode.removeChild(this.svgNode.lastChild);var e=this.createNode("rect");return e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",""+this.canvasSize.width),e.setAttribute("height",""+this.canvasSize.height),this._bindFillDraw(e,"background",null,null),e.setAttribute("fill",void 0===t?"none":t),e},t}();e.drawutilssvg=o}},e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}globalThis.UIDGenerator=i(919).geomutils,globalThis.VertexAttr=i(954).VertexAttr,globalThis.VertexListeners=i(779).VertexListeners,globalThis.Vertex=i(909).Vertex,globalThis.Bounds=i(710).Bounds,globalThis.Grid=i(82).Grid,globalThis.Line=i(198).Line,globalThis.Vector=i(609).Vector,globalThis.CubicBezierCurve=i(281).CubicBezierCurve,globalThis.BezierPath=i(432).BezierPath,globalThis.Polygon=i(180).Polygon,globalThis.Triangle=i(591).Triangle,globalThis.VEllipse=i(185).VEllipse,globalThis.Circle=i(991).Circle,globalThis.CircleSector=i(210).CircleSector,globalThis.PBImage=i(810).PBImage,globalThis.MouseHandler=i(676).MouseHandler,globalThis.KeyHandler=i(436).KeyHandler,globalThis.drawutils=i(836).drawutils,globalThis.drawutilsgl=i(121).drawutilsgl,globalThis.drawutilssvg=i(923).drawutilssvg,globalThis.geomutils=i(369).geomutils,globalThis.PlotBoilerplate=i(378).H})();
//# sourceMappingURL=plotboilerplate.min.js.map